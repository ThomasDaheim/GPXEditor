myMap.options.worldCopyJump=!0;myMap.options.zoomAnimation=!1;myMap.options.preferCanvas=!0;myMap.options.renderer=L.canvas();function disableCntrlDrag(a){a.originalEvent.ctrlKey&&(myMap.dragging.disable(),myMap.boxZoom.disable())}function enableCntrlDrag(a){a.originalEvent.ctrlKey&&(myMap.dragging.enable(),myMap.boxZoom.enable())}myMap.on("mousedown",disableCntrlDrag);myMap.on("mouseup",enableCntrlDrag);
function mapViewChanged(a){var b=getMapBounds();jscallback.mapViewChanged(a.type,b[0],b[1],b[2],b[3])}myMap.on("zoomend",mapViewChanged);myMap.on("moveend",mapViewChanged);myMap.on("resize",mapViewChanged);function mapViewChanging(a){var b=getMapBounds();jscallback.mapViewChanging(a.type,b[0],b[1],b[2],b[3])}myMap.on("zoomstart",mapViewChanging);myMap.on("movestart",mapViewChanging);var mapBounds;function setMapBounds(a,b,c,d,e){mapBounds=[[a,c],[b,d]];e&&doSetMapBounds(mapBounds)}
function doSetMapBounds(a){"undefined"!==typeof a&&myMap.fitBounds(a)}function getMapBounds(){var a=myMap.getBounds();return[a.getSouthWest().lat,a.getSouthWest().lng,a.getNorthEast().lat,a.getNorthEast().lng]}function updateMarkerIcon(a,b){window[a].setIcon(window[b])}function updateMarkerStyle(a,b,c,d,e){window[a].setStyle({color:b,weight:c,opacity:d,lineCap:e});window[a].remove(myMap);window[a].addTo(myMap)}function highlightMarker(a){window[a].valueOf()._icon.style.backgroundColor="red"}
function unlightMarker(a){window[a].valueOf()._icon.style.backgroundColor="transparent"}function updateMarkerLocation(a,b,c){a=window[a];b=new L.LatLng(b,c);a.setLatLng(b)}function addClickToLayer(a,b,c){window[a].on("click",function(d){jscallback.selectMarker(a,b,c,d.originalEvent.shiftKey)})}function addNameToLayer(a,b){var c=window[a];c instanceof L.Polyline&&(c.options.interactive=!0,c.bindTooltip(b,{sticky:!0}),setTitle(a,b))}
function startDragMarker(a,b,c){if(""!==a){a=b.getLatLngs();b=c.getLatLng();c.polylineLatlng=-1;for(var d=0;d<a.length;d++)b.equals(a[d])&&(c.polylineLatlng=d)}}function doDragMarker(a,b,c){if(""!==a&&-1!==c.polylineLatlng){a=b.getLatLngs();var d=c.getLatLng();a.splice(c.polylineLatlng,1,d);b.setLatLngs(a)}}function endDragMarker(a,b,c,d,e,f){e=f.getLatLng();jscallback.moveMarker(a,b,c,e.lat,e.lng);""!==d&&delete f.polylineLatlng}
function trackCursor(a,b,c,d){c.setLatLng(d.latlng);doDragMarker(a,b,c)}
function makeDraggable(a,b,c,d){var e=window[a],f=window[d];if(a.startsWith("circleMarker")){var g=trackCursor.bind(null,d,f,e);e.on("mousedown",function(){myMap.dragging.disable();myMap.on("mousemove",g);startDragMarker(d,f,e)});e.on("mouseup",function(){myMap.dragging.enable();myMap.off("mousemove",g);endDragMarker(a,b,c,d,f,e)})}else e.on("dragstart",function(a){startDragMarker(d,f,e)}),e.on("drag",function(a){doDragMarker(d,f,e)}),e.on("dragend",function(g){endDragMarker(a,b,c,d,f,e)}),e.dragging.enable()}
function setTitle(a,b){a=window[a];a._icon?a._icon.title=b:a.options.title=b}function getLatLngForPoint(a,b){a=L.point(a,b);a=myMap.containerPointToLatLng(a);return[a.lat,a.lng]}function getLatLngForRect(a,b,c,d){return getLatLngForPoint(a,b).concat(getLatLngForPoint(c,d))}function getPointForLatLng(a,b){a=L.latLng(a,b);a=myMap.latLngToContainerPoint(a);return[a.x,a.y]}
function getPointsForLatLngs(a){for(var b=[],c=a.length,d=0;d<c;d++){var e=a[d];e=getPointForLatLng(e[0],e[1]);b.push(L.point(e[0],e[1]))}return pointsToString(b)}function coordsToString(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];b=b+"lat:"+e.lat+", lon:"+e.lng;d<c-1&&(b+=" - ")}return b}function pointsToString(a){for(var b="",c=a.length,d=0;d<c;d++){var e=a[d];b=b+"x:"+e.x+", y:"+e.y;d<c-1&&(b+=" - ")}return b}
function registerMarker(a){a=a.target;var b=a.getLatLng();jscallback.registerMarker(JSON.stringify(a.properties),b.lat,b.lng)}function deregisterMarker(a){a=a.target;var b=a.getLatLng();jscallback.deregisterMarker(JSON.stringify(a.properties),b.lat,b.lng)}var searchResultsLayer=L.layerGroup().addTo(myMap),searchResults,searchCount;function clearSearchResults(){searchResultsLayer.clearLayers();searchResults=[];searchCount=0}clearSearchResults();
function removeSearchResult(a){a in searchResults&&searchResultsLayer.removeLayer(searchResults[a])}
function showSearchResults(a,b,c){b=JSON.parse(b);c=window[c];if(b.hasOwnProperty("elements")&&0<b.elements.length)for(var d in b.elements){var e=(new L.marker([b.elements[d].lat,b.elements[d].lon],{icon:c})).addTo(searchResultsLayer);e.properties={};e.properties.SearchItem=a;e.on("mouseover",registerMarker);e.on("mouseout",deregisterMarker);var f=getTitleFromTags(e,b.elements[d]);0<f.length&&(e._icon?e._icon.title=f:e.options.title=f);e.properties.MarkerCount=searchCount;searchResults.push(e);searchCount++}}
function getTitleFromTags(a,b){var c="";b.hasOwnProperty("tags")&&(b.tags.hasOwnProperty("name")&&(c=b.tags.name,a.properties.Name=b.tags.name),b.tags.hasOwnProperty("cuisine")&&(0<c.length&&(c+="\n"),c+=b.tags.cuisine,a.properties.Cuisine=b.tags.cuisine),b.tags.hasOwnProperty("phone")&&(0<c.length&&(c+="\n"),c+=b.tags.phone,a.properties.Phone=b.tags.phone),b.tags.hasOwnProperty("email")&&(0<c.length&&(c+="\n"),c+=b.tags.email,a.properties.Email=b.tags.email),b.tags.hasOwnProperty("website")&&(0<
c.length&&(c+="\n"),c+=b.tags.website,a.properties.Website=b.tags.website),b.tags.hasOwnProperty("description")&&(0<c.length&&(c+="\n"),c+=b.tags.description,a.properties.Description=b.tags.description));return c}function initCallback(a,b,c,d){addMouseOverToLayer(a);-1!==b&&-1!==c&&(addClickToLayer(a,b,c),makeDraggable(a,b,c,d))}
function addMouseOverToLayer(a){var b=window[a];b.on("mouseover",function(b){b=b.target.getLatLng();jscallback.registerWaypoint(a,b.lat,b.lng)});b.on("mouseout",function(b){b=b.target.getLatLng();jscallback.deregisterWaypoint(a,b.lat,b.lng)})};