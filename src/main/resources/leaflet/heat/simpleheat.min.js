"undefined"!==typeof module&&(module.exports=simpleheat);function simpleheat(a){if(!(this instanceof simpleheat))return new simpleheat(a);this._canvas=a="string"===typeof a?document.getElementById(a):a;this._ctx=a.getContext("2d");this._width=a.width;this._height=a.height;this._max=1;this._data=[]}
simpleheat.prototype={defaultRadius:25,defaultGradient:{"0.4":"blue","0.6":"cyan","0.7":"lime","0.8":"yellow",1:"red"},data:function(a){this._data=a;return this},max:function(a){this._max=a;return this},add:function(a){this._data.push(a);return this},clear:function(){this._data=[];return this},radius:function(a,b){b=void 0===b?15:b;var c=this._circle=this._createCanvas(),e=c.getContext("2d"),d=this._r=a+b;c.width=c.height=2*d;e.shadowOffsetX=e.shadowOffsetY=2*d;e.shadowBlur=b;e.shadowColor="black";
e.beginPath();e.arc(-d,-d,a,0,2*Math.PI,!0);e.closePath();e.fill();return this},resize:function(){this._width=this._canvas.width;this._height=this._canvas.height},gradient:function(a){var b=this._createCanvas(),c=b.getContext("2d"),e=c.createLinearGradient(0,0,0,256);b.width=1;b.height=256;for(var d in a)e.addColorStop(+d,a[d]);c.fillStyle=e;c.fillRect(0,0,1,256);this._grad=c.getImageData(0,0,1,256).data;return this},draw:function(a){this._circle||this.radius(this.defaultRadius);this._grad||this.gradient(this.defaultGradient);
var b=this._ctx;b.clearRect(0,0,this._width,this._height);for(var c=0,e=this._data.length,d;c<e;c++)d=this._data[c],b.globalAlpha=Math.min(Math.max(d[2]/this._max,void 0===a?.05:a),1),b.drawImage(this._circle,d[0]-this._r,d[1]-this._r);a=b.getImageData(0,0,this._width,this._height);this._colorize(a.data,this._grad);b.putImageData(a,0,0);return this},_colorize:function(a,b){for(var c=0,e=a.length,d;c<e;c+=4)if(d=4*a[c+3])a[c]=b[d],a[c+1]=b[d+1],a[c+2]=b[d+2]},_createCanvas:function(){return"undefined"!==
typeof document?document.createElement("canvas"):new this._canvas.constructor}};