!function(){function a(b){return this instanceof a?(this._canvas=b="string"==typeof b?document.getElementById(b):b,this._ctx=b.getContext("2d"),this._width=b.width,this._height=b.height,this._max=1,void this.clear()):new a(b)}a.prototype={defaultRadius:25,defaultGradient:{"0.4":"blue","0.6":"cyan","0.7":"lime","0.8":"yellow",1:"red"},data:function(b,a){return this._data=b,this},max:function(b){return this._max=b,this},add:function(b){return this._data.push(b),this},clear:function(){return this._data=
[],this},radius:function(b,a){a=a||15;var d=this._circle=document.createElement("canvas"),c=d.getContext("2d"),f=this._r=b+a;return d.width=d.height=2*f,c.shadowOffsetX=c.shadowOffsetY=200,c.shadowBlur=a,c.shadowColor="black",c.beginPath(),c.arc(f-200,f-200,b,0,2*Math.PI,!0),c.closePath(),c.fill(),this},gradient:function(a){var b=document.createElement("canvas"),g=b.getContext("2d"),c=g.createLinearGradient(0,0,0,256);b.width=1;b.height=256;for(var f in a)c.addColorStop(f,a[f]);return g.fillStyle=
c,g.fillRect(0,0,1,256),this._grad=g.getImageData(0,0,1,256).data,this},draw:function(a){this._circle||this.radius(this.defaultRadius);this._grad||this.gradient(this.defaultGradient);var b=this._ctx;b.clearRect(0,0,this._width,this._height);for(var g,c=0,f=this._data.length;f>c;c++)g=this._data[c],b.globalAlpha=Math.max(g[2]/this._max,a||.05),b.drawImage(this._circle,g[0]-this._r,g[1]-this._r);a=b.getImageData(0,0,this._width,this._height);return this._colorize(a.data,this._grad),b.putImageData(a,
0,0),this},_colorize:function(a,d){for(var b,c=3,f=a.length;f>c;c+=4)(b=4*a[c])&&(a[c-3]=d[b],a[c-2]=d[b+1],a[c-1]=d[b+2])}};window.simpleheat=a}();
L.HeatLayer=(L.Layer?L.Layer:L.Class).extend({initialize:function(a,b){this._latlngs=a;L.setOptions(this,b)},setLatLngs:function(a){return this._latlngs=a,this.redraw()},addLatLng:function(a){return this._latlngs.push(a),this.redraw()},setOptions:function(a){return L.setOptions(this,a),this._heat&&this._updateOptions(),this.redraw()},redraw:function(){return!this._heat||this._frame||this._map._animating||(this._frame=L.Util.requestAnimFrame(this._redraw,this)),this},onAdd:function(a){this._map=a;
this._canvas||this._initCanvas();a._panes.overlayPane.appendChild(this._canvas);a.on("moveend",this._reset,this);a.options.zoomAnimation&&L.Browser.any3d&&a.on("zoomanim",this._animateZoom,this);this._reset()},onRemove:function(a){a.getPanes().overlayPane.removeChild(this._canvas);a.off("moveend",this._reset,this);a.options.zoomAnimation&&a.off("zoomanim",this._animateZoom,this)},addTo:function(a){return a.addLayer(this),this},_initCanvas:function(){var a=this._canvas=L.DomUtil.create("canvas","leaflet-heatmap-layer leaflet-layer"),
b=L.DomUtil.testProp(["transformOrigin","WebkitTransformOrigin","msTransformOrigin"]);a.style[b]="50% 50%";b=this._map.getSize();a.width=b.x;a.height=b.y;L.DomUtil.addClass(a,"leaflet-zoom-"+(this._map.options.zoomAnimation&&L.Browser.any3d?"animated":"hide"));this._heat=simpleheat(a);this._updateOptions()},_updateOptions:function(){this._heat.radius(this.options.radius||this._heat.defaultRadius,this.options.blur);this.options.gradient&&this._heat.gradient(this.options.gradient);this.options.max&&
this._heat.max(this.options.max)},_reset:function(){var a=this._map.containerPointToLayerPoint([0,0]);L.DomUtil.setPosition(this._canvas,a);a=this._map.getSize();this._heat._width!==a.x&&(this._canvas.width=this._heat._width=a.x);this._heat._height!==a.y&&(this._canvas.height=this._heat._height=a.y);this._redraw()},_redraw:function(){var a,b,d,g=[],c=this._heat._r,f=this._map.getSize();var m=new L.Bounds(L.point([-c,-c]),f.add([c,c]));f=void 0===this.options.max?1:this.options.max;var e=void 0===
this.options.maxZoom?this._map.getMaxZoom():this.options.maxZoom;var p=1/Math.pow(2,Math.max(0,Math.min(e-this._map.getZoom(),12))),k=c/2;c=[];e=this._map._getMapPanePos();var q=e.x%k,r=e.y%k;e=0;for(a=this._latlngs.length;a>e;e++)if(b=this._map.latLngToContainerPoint(this._latlngs[e]),m.contains(b)){var n=Math.floor((b.x-q)/k)+2;var l=Math.floor((b.y-r)/k)+2;var h=(void 0!==this._latlngs[e].alt?this._latlngs[e].alt:void 0!==this._latlngs[e][2]?+this._latlngs[e][2]:1)*p;c[l]=c[l]||[];(d=c[l][n])?
(d[0]=(d[0]*d[2]+b.x*h)/(d[2]+h),d[1]=(d[1]*d[2]+b.y*h)/(d[2]+h),d[2]+=h):c[l][n]=[b.x,b.y,h]}e=0;for(a=c.length;a>e;e++)if(c[e])for(b=0,m=c[e].length;m>b;b++)(d=c[e][b])&&g.push([Math.round(d[0]),Math.round(d[1]),Math.min(d[2],f)]);this._heat.data(g).draw(this.options.minOpacity);this._frame=null},_animateZoom:function(a){var b=this._map.getZoomScale(a.zoom);a=this._map._getCenterOffset(a.center)._multiplyBy(-b).subtract(this._map._getMapPanePos());L.DomUtil.setTransform?L.DomUtil.setTransform(this._canvas,
a,b):this._canvas.style[L.DomUtil.TRANSFORM]=L.DomUtil.getTranslateString(a)+" scale("+b+")"}});L.heatLayer=function(a,b){return new L.HeatLayer(a,b)};