(function(){function m(q,t,k){function v(b,e){if(!t[b]){if(!q[b]){var w="function"==typeof require&&require;if(!e&&w)return w(b,!0);if(f)return f(b,!0);e=Error("Cannot find module '"+b+"'");throw e.code="MODULE_NOT_FOUND",e;}e=t[b]={exports:{}};q[b][0].call(e.exports,function(a){return v(q[b][1][a]||a)},e,e.exports,m,q,t,k)}return t[b].exports}for(var f="function"==typeof require&&require,w=0;w<k.length;w++)v(k[w]);return v}return m})()({1:[function(m,q,t){(function(k,v,f){!function(w){if("object"==
typeof t&&"undefined"!=typeof q)q.exports=w();else if("function"==typeof define&&define.amd)define([],w);else{var b;"undefined"!=typeof window?b=window:"undefined"!=typeof v?b=v:"undefined"!=typeof self&&(b=self);b.Promise=w()}}(function(){return function a(b,e,h){function c(d,u){if(!e[d]){if(!b[d]){var z="function"==typeof m&&m;if(!u&&z)return z(d,!0);if(l)return l(d,!0);u=Error("Cannot find module '"+d+"'");throw u.code="MODULE_NOT_FOUND",u;}u=e[d]={exports:{}};b[d][0].call(u.exports,function(a){return c(b[d][1][a]||
a)},u,u.exports,a,b,e,h)}return e[d].exports}for(var l="function"==typeof m&&m,d=0;d<h.length;d++)c(h[d]);return c}({1:[function(b,e,h){e.exports=function(a){function c(a){a=new b(a);var c=a.promise();return a.setHowMany(1),a.setUnwrap(),a.init(),c}var b=a._SomePromiseArray;a.any=function(a){return c(a)};a.prototype.any=function(){return c(this)}}},{}],2:[function(b,e,h){function a(){this._isTickUsed=this._customScheduler=!1;this._lateQueue=new d(16);this._normalQueue=new d(16);this._haveDrainedQueues=
!1;var a=this;this.drainQueues=function(){a._drainQueues()};this._schedule=l}function c(a){var c=a.shift();if("function"!=typeof c)c._settlePromises();else{var b=a.shift();a=a.shift();c.call(b,a)}}try{throw Error();}catch(z){h=z}var l=b("./schedule"),d=b("./queue");a.prototype.setScheduler=function(a){var c=this._schedule;return this._schedule=a,this._customScheduler=!0,c};a.prototype.hasCustomScheduler=function(){return this._customScheduler};a.prototype.haveItemsQueued=function(){return this._isTickUsed||
this._haveDrainedQueues};a.prototype.fatalError=function(a,c){c?(k.stderr.write("Fatal "+(a instanceof Error?a.stack:a)+"\n"),k.exit(2)):this.throwLater(a)};a.prototype.throwLater=function(a,c){if(1===arguments.length&&(c=a,a=function(){throw c;}),"undefined"!=typeof setTimeout)setTimeout(function(){a(c)},0);else try{this._schedule(function(){a(c)})}catch(p){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");}};a.prototype.invokeLater=function(a,c,b){this._lateQueue.push(a,
c,b);this._queueTick()};a.prototype.invoke=function(a,c,b){this._normalQueue.push(a,c,b);this._queueTick()};a.prototype.settlePromises=function(a){this._normalQueue._pushOne(a);this._queueTick()};a.prototype._drainQueues=function(){for(var a=this._normalQueue;0<a.length();)c(a);this._reset();this._haveDrainedQueues=!0;for(a=this._lateQueue;0<a.length();)c(a)};a.prototype._queueTick=function(){this._isTickUsed||(this._isTickUsed=!0,this._schedule(this.drainQueues))};a.prototype._reset=function(){this._isTickUsed=
!1};e.exports=a;e.exports.firstLineError=h},{"./queue":26,"./schedule":29}],3:[function(b,e,h){e.exports=function(a,c,b,d){var l=!1,e=function(a,c){this._reject(c)},p=function(a,c){c.promiseRejectionQueued=!0;c.bindingPromise._then(e,e,null,this,a)},h=function(a,c){0==(50397184&this._bitField)&&this._resolveCallback(c.target)},g=function(a,c){c.promiseRejectionQueued||this._reject(a)};a.prototype.bind=function(n){l||(l=!0,a.prototype._propagateFrom=d.propagateFromFunction(),a.prototype._boundValue=
d.boundValueFunction());n=b(n);var r=new a(c);r._propagateFrom(this,1);var e=this._target();if(r._setBoundTo(n),n instanceof a){var A={promiseRejectionQueued:!1,promise:r,target:e,bindingPromise:n};e._then(c,p,void 0,r,A);n._then(h,g,void 0,r,A);r._setOnCancel(n)}else r._resolveCallback(e);return r};a.prototype._setBoundTo=function(a){void 0!==a?(this._bitField|=2097152,this._boundTo=a):this._bitField&=-2097153};a.prototype._isBound=function(){return 2097152==(2097152&this._bitField)};a.bind=function(c,
b){return a.resolve(b).bind(c)}}},{}],4:[function(b,e,h){var a;"undefined"!=typeof Promise&&(a=Promise);var c=b("./promise")();c.noConflict=function(){try{Promise===c&&(Promise=a)}catch(l){}return c};e.exports=c},{"./promise":22}],5:[function(b,e,h){var a=Object.create;a&&(h=a(null),a=a(null),h[" size"]=a[" size"]=0);e.exports=function(a){function c(c){var b=this.pop(),d;if(null!=c&&(d=c[b]),"function"!=typeof d)throw c="Object "+u.classString(c)+" has no method '"+u.toString(b)+"'",new a.TypeError(c);
return d.apply(c,this)}function d(a){return a[this]}function e(a){var c=+this;return 0>c&&(c=Math.max(0,c+a.length)),a[c]}var u=b("./util"),p=u.canEvaluate;u.isIdentifier;a.prototype.call=function(a){var b=[].slice.call(arguments,1);return b.push(a),this._then(c,void 0,void 0,b,void 0)};a.prototype.get=function(a){if("number"==typeof a)var c=e;else p?(c=(void 0)(a),c=null!==c?c:d):c=d;return this._then(c,void 0,void 0,a,void 0)}}},{"./util":36}],6:[function(b,e,h){e.exports=function(a,c,l,d){var e=
b("./util"),u=e.tryCatch,p=e.errorObj,h=a._async;a.prototype.break=a.prototype.cancel=function(){if(!d.cancellation())return this._warn("cancellation is disabled");for(var a=this,c=a;a._isCancellable();){if(!a._cancelBy(c)){c._isFollowing()?c._followee().cancel():c._cancelBranched();break}var b=a._cancellationParent;if(null==b||!b._isCancellable()){a._isFollowing()?a._followee().cancel():a._cancelBranched();break}a._isFollowing()&&a._followee().cancel();a._setWillBeCancelled();c=a;a=b}};a.prototype._branchHasCancelled=
function(){this._branchesRemainingToCancel--};a.prototype._enoughBranchesHaveCancelled=function(){return void 0===this._branchesRemainingToCancel||0>=this._branchesRemainingToCancel};a.prototype._cancelBy=function(a){return a===this?(this._branchesRemainingToCancel=0,this._invokeOnCancel(),!0):(this._branchHasCancelled(),!!this._enoughBranchesHaveCancelled()&&(this._invokeOnCancel(),!0))};a.prototype._cancelBranched=function(){this._enoughBranchesHaveCancelled()&&this._cancel()};a.prototype._cancel=
function(){this._isCancellable()&&(this._setCancelled(),h.invoke(this._cancelPromises,this,void 0))};a.prototype._cancelPromises=function(){0<this._length()&&this._settlePromises()};a.prototype._unsetOnCancel=function(){this._onCancelField=void 0};a.prototype._isCancellable=function(){return this.isPending()&&!this._isCancelled()};a.prototype.isCancellable=function(){return this.isPending()&&!this.isCancelled()};a.prototype._doInvokeOnCancel=function(a,c){if(e.isArray(a))for(var b=0;b<a.length;++b)this._doInvokeOnCancel(a[b],
c);else void 0!==a&&("function"==typeof a?c||(a=u(a).call(this._boundValue()),a===p&&(this._attachExtraTrace(a.e),h.throwLater(a.e))):a._resultCancelled(this))};a.prototype._invokeOnCancel=function(){var a=this._onCancel();this._unsetOnCancel();h.invoke(this._doInvokeOnCancel,this,a)};a.prototype._invokeInternalOnCancel=function(){this._isCancellable()&&(this._doInvokeOnCancel(this._onCancel(),!0),this._unsetOnCancel())};a.prototype._resultCancelled=function(){this.cancel()}}},{"./util":36}],7:[function(b,
e,h){e.exports=function(a){var c=b("./util"),l=b("./es5").keys,d=c.tryCatch,e=c.errorObj;return function(b,p,h){return function(g){var n=h._boundValue(),r=0;a:for(;r<b.length;++r){var u=b[r];if(u===Error||null!=u&&u.prototype instanceof Error){if(g instanceof u)return d(p).call(n,g)}else if("function"==typeof u){u=d(u).call(n,g);if(u===e)return u;if(u)return d(p).call(n,g)}else if(c.isObject(g)){for(var A=l(u),I=0;I<A.length;++I){var z=A[I];if(u[z]!=g[z])continue a}return d(p).call(n,g)}}return a}}}},
{"./es5":13,"./util":36}],8:[function(b,e,h){e.exports=function(a){function c(){this._trace=new c.CapturedTrace(b())}function b(){var a=e.length-1;if(0<=a)return e[a]}var d=!1,e=[];return a.prototype._promiseCreated=function(){},a.prototype._pushContext=function(){},a.prototype._popContext=function(){return null},a._peekContext=a.prototype._peekContext=function(){},c.prototype._pushContext=function(){void 0!==this._trace&&(this._trace._promiseCreated=null,e.push(this._trace))},c.prototype._popContext=
function(){if(void 0!==this._trace){var a=e.pop(),c=a._promiseCreated;return a._promiseCreated=null,c}return null},c.CapturedTrace=null,c.create=function(){if(d)return new c},c.deactivateLongStackTraces=function(){},c.activateLongStackTraces=function(){var l=a.prototype._pushContext,e=a.prototype._popContext,h=a._peekContext,g=a.prototype._peekContext,n=a.prototype._promiseCreated;c.deactivateLongStackTraces=function(){a.prototype._pushContext=l;a.prototype._popContext=e;a._peekContext=h;a.prototype._peekContext=
g;a.prototype._promiseCreated=n;d=!1};d=!0;a.prototype._pushContext=c.prototype._pushContext;a.prototype._popContext=c.prototype._popContext;a._peekContext=a.prototype._peekContext=b;a.prototype._promiseCreated=function(){var a=this._peekContext();a&&null==a._promiseCreated&&(a._promiseCreated=this)}},c}},{}],9:[function(b,e,h){e.exports=function(a,c,l,d){function e(a,c){return{promise:c}}function h(){return!1}function p(a,c,b){var d=this;try{a(c,b,function(a){if("function"!=typeof a)throw new TypeError("onCancel must be a function, got: "+
x.toString(a));d._attachCancellationCallback(a)})}catch(na){return na}}function K(a){if(!this._isCancellable())return this;var c=this._onCancel();void 0!==c?x.isArray(c)?c.push(a):this._setOnCancel([c,a]):this._setOnCancel(a)}function g(){return this._onCancelField}function n(a){this._onCancelField=a}function r(){this._onCancelField=this._cancellationParent=void 0}function f(a,c){if(0!=(1&c)){this._cancellationParent=a;var b=a._branchesRemainingToCancel;void 0===b&&(b=0);a._branchesRemainingToCancel=
b+1}0!=(2&c)&&a._isBound()&&this._setBoundTo(a._boundTo)}function A(){var c=this._boundTo;return void 0!==c&&c instanceof a?c.isFulfilled()?c.value():void 0:c}function I(){this._trace=new B(this._peekContext())}function M(a,c){if(oa(a)){var b=this._trace;(void 0!==b&&c&&(b=b._parent),void 0!==b)?b.attachExtraTrace(a):a.__stackCleaned__||(c=E(a),x.notEnumerableProp(a,"stack",c.message+"\n"+c.stack.join("\n")),x.notEnumerableProp(a,"__stackCleaned__",!0))}}function m(){this._trace=void 0}function v(c,
b,d){if(C.warnings){var g;c=new R(c);b?d._attachExtraTrace(c):C.longStackTraces&&(g=a._peekContext())?g.attachExtraTrace(c):(b=E(c),c.stack=b.message+"\n"+b.stack.join("\n"));V("warning",c)||q(c,"",!0)}}function F(a){for(var c=[],b=0;b<a.length;++b){var d=a[b],g="    (No stack trace)"===d||S.test(d),l=g&&Y(d);g&&!l&&(ca&&" "!==d.charAt(0)&&(d="    "+d),c.push(d))}return c}function E(a){var c=a.stack,b=a.toString(),d;if("string"==typeof c&&0<c.length){var g=a.stack.replace(/\s+$/g,"").split("\n");
for(d=0;d<g.length;++d){var l=g[d];if("    (No stack trace)"===l||S.test(l))break}d=(0<d&&"SyntaxError"!=a.name&&(g=g.slice(d)),g)}else d=["    (No stack trace)"];return c=d,{message:b,stack:"SyntaxError"==a.name?c:F(c)}}function q(a,c,b){"undefined"!=typeof console&&(a=x.isObject(a)?c+T(a.stack,a):c+String(a),"function"==typeof D?D(a,b):"function"!=typeof console.log&&"object"!=typeof console.log||console.log(a))}function G(a,c,b,d){var g=!1;try{"function"==typeof c&&(g=!0,"rejectionHandled"===a?
c(d):c(b,d))}catch(Z){N.throwLater(Z)}"unhandledRejection"===a?V(a,b,d)||g||q(b,"Unhandled rejection "):V(a,d)}function y(a){if("function"==typeof a)var c="[function "+(a.name||"anonymous")+"]";else{c=a&&"function"==typeof a.toString?a.toString():x.toString(a);if(/\[object [a-zA-Z0-9$_]+\]/.test(c))try{c=JSON.stringify(a)}catch(ma){}0===c.length&&(c="(empty array)")}a=41>c.length?c:c.substr(0,38)+"...";return"(<"+a+">, no stack trace)"}function t(){return"function"==typeof ea}function O(a){if(a=a.match(ra))return{fileName:a[1],
line:parseInt(a[2],10)}}function B(a){this._parent=a;this._promisesCreated=0;a=this._length=1+(void 0===a?0:a._length);ea(this,B);32<a&&this.uncycle()}var H,U,D,W,N=a._async,R=b("./errors").Warning,x=b("./util"),L=b("./es5"),oa=x.canAttachTrace,fa=/[\\\/]bluebird[\\\/]js[\\\/](release|debug|instrumented)/,sa=/\((?:timers\.js):\d+:\d+\)/,ta=/[\/<\(](.+?):(\d+):(\d+)\)?\s*$/,S=null,T=null,ca=!1,X=0!=x.env("BLUEBIRD_DEBUG"),ha=!(0==x.env("BLUEBIRD_WARNINGS")||!X&&!x.env("BLUEBIRD_WARNINGS"));X=!(0==
x.env("BLUEBIRD_LONG_STACK_TRACES")||!X&&!x.env("BLUEBIRD_LONG_STACK_TRACES"));var aa=0!=x.env("BLUEBIRD_W_FORGOTTEN_RETURN")&&(ha||!!x.env("BLUEBIRD_W_FORGOTTEN_RETURN"));!function(){function c(){for(var a=0;a<d.length;++a)d[a]._notifyUnhandledRejection();b()}function b(){d.length=0}var d=[];W=function(a){d.push(a);setTimeout(c,1)};L.defineProperty(a,"_unhandledRejectionCheck",{value:c});L.defineProperty(a,"_unhandledRejectionClear",{value:b})}();a.prototype.suppressUnhandledRejections=function(){var a=
this._target();a._bitField=-1048577&a._bitField|524288};a.prototype._ensurePossibleRejectionHandled=function(){0==(524288&this._bitField)&&(this._setRejectionIsUnhandled(),W(this))};a.prototype._notifyUnhandledRejectionIsHandled=function(){G("rejectionHandled",H,void 0,this)};a.prototype._setReturnedNonUndefined=function(){this._bitField|=268435456};a.prototype._returnedNonUndefined=function(){return 0!=(268435456&this._bitField)};a.prototype._notifyUnhandledRejection=function(){if(this._isRejectionUnhandled()){var a=
this._settledValue();this._setUnhandledRejectionIsNotified();G("unhandledRejection",U,a,this)}};a.prototype._setUnhandledRejectionIsNotified=function(){this._bitField|=262144};a.prototype._unsetUnhandledRejectionIsNotified=function(){this._bitField&=-262145};a.prototype._isUnhandledRejectionNotified=function(){return 0<(262144&this._bitField)};a.prototype._setRejectionIsUnhandled=function(){this._bitField|=1048576};a.prototype._unsetRejectionIsUnhandled=function(){this._bitField&=-1048577;this._isUnhandledRejectionNotified()&&
(this._unsetUnhandledRejectionIsNotified(),this._notifyUnhandledRejectionIsHandled())};a.prototype._isRejectionUnhandled=function(){return 0<(1048576&this._bitField)};a.prototype._warn=function(a,c,b){return v(a,c,b||this)};a.onPossiblyUnhandledRejection=function(c){var b=a._getContext();U=x.contextBind(b,c)};a.onUnhandledRejectionHandled=function(c){var b=a._getContext();H=x.contextBind(b,c)};var ia=function(){};a.longStackTraces=function(){if(N.haveItemsQueued()&&!C.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");
if(!C.longStackTraces&&t()){var b=a.prototype._captureStackTrace,d=a.prototype._attachExtraTrace,g=a.prototype._dereferenceTrace;C.longStackTraces=!0;ia=function(){if(N.haveItemsQueued()&&!C.longStackTraces)throw Error("cannot enable long stack traces after promises have been created\n\n    See http://goo.gl/MqrFmX\n");a.prototype._captureStackTrace=b;a.prototype._attachExtraTrace=d;a.prototype._dereferenceTrace=g;c.deactivateLongStackTraces();C.longStackTraces=!1};a.prototype._captureStackTrace=
I;a.prototype._attachExtraTrace=M;a.prototype._dereferenceTrace=m;c.activateLongStackTraces()}};a.hasLongStackTraces=function(){return C.longStackTraces&&t()};var ba={unhandledrejection:{before:function(){var a=x.global.onunhandledrejection;return x.global.onunhandledrejection=null,a},after:function(a){x.global.onunhandledrejection=a}},rejectionhandled:{before:function(){var a=x.global.onrejectionhandled;return x.global.onrejectionhandled=null,a},after:function(a){x.global.onrejectionhandled=a}}},
ja=function(){var a=function(a,c){if(!a)return!x.global.dispatchEvent(c);var b;try{return b=a.before(),!x.global.dispatchEvent(c)}finally{a.after(b)}};try{if("function"==typeof CustomEvent){var c=new CustomEvent("CustomEvent");return x.global.dispatchEvent(c),function(c,b){c=c.toLowerCase();var d=new CustomEvent(c,{detail:b,cancelable:!0});return L.defineProperty(d,"promise",{value:b.promise}),L.defineProperty(d,"reason",{value:b.reason}),a(ba[c],d)}}return"function"==typeof Event?(c=new Event("CustomEvent"),
x.global.dispatchEvent(c),function(c,b){c=c.toLowerCase();var d=new Event(c,{cancelable:!0});return d.detail=b,L.defineProperty(d,"promise",{value:b.promise}),L.defineProperty(d,"reason",{value:b.reason}),a(ba[c],d)}):((c=document.createEvent("CustomEvent")).initCustomEvent("testingtheevent",!1,!0,{}),x.global.dispatchEvent(c),function(c,b){c=c.toLowerCase();var d=document.createEvent("CustomEvent");return d.initCustomEvent(c,!1,!0,b),a(ba[c],d)})}catch(ma){}return function(){return!1}}(),ka=x.isNode?
function(){return k.emit.apply(k,arguments)}:x.global?function(a){var c="on"+a.toLowerCase();c=x.global[c];return!!c&&(c.apply(x.global,[].slice.call(arguments,1)),!0)}:function(){return!1},ua={promiseCreated:e,promiseFulfilled:e,promiseRejected:e,promiseResolved:e,promiseCancelled:e,promiseChained:function(a,c,b){return{promise:c,child:b}},warning:function(a,c){return{warning:c}},unhandledRejection:function(a,c,b){return{reason:c,promise:b}},rejectionHandled:e},V=function(a){var c=!1;try{c=ka.apply(null,
arguments)}catch(Q){N.throwLater(Q),c=!0}var b=!1;try{b=ja(a,ua[a].apply(null,arguments))}catch(Q){N.throwLater(Q),b=!0}return b||c};a.config=function(c){if("longStackTraces"in(c=Object(c))&&(c.longStackTraces?a.longStackTraces():!c.longStackTraces&&a.hasLongStackTraces()&&ia()),"warnings"in c){var b=c.warnings;C.warnings=!!b;aa=C.warnings;x.isObject(b)&&"wForgottenReturn"in b&&(aa=!!b.wForgottenReturn)}if("cancellation"in c&&c.cancellation&&!C.cancellation){if(N.haveItemsQueued())throw Error("cannot enable cancellation after promises are in use");
a.prototype._clearCancellationData=r;a.prototype._propagateFrom=f;a.prototype._onCancel=g;a.prototype._setOnCancel=n;a.prototype._attachCancellationCallback=K;a.prototype._execute=p;la=f;C.cancellation=!0}if("monitoring"in c&&(c.monitoring&&!C.monitoring?(C.monitoring=!0,a.prototype._fireEvent=V):!c.monitoring&&C.monitoring&&(C.monitoring=!1,a.prototype._fireEvent=h)),"asyncHooks"in c&&x.nodeSupportsAsyncResource)c=!!c.asyncHooks,C.asyncHooks!==c&&(C.asyncHooks=c,c?l():d());return a};a.prototype._fireEvent=
h;a.prototype._execute=function(a,c,b){try{a(c,b)}catch(Q){return Q}};a.prototype._onCancel=function(){};a.prototype._setOnCancel=function(a){};a.prototype._attachCancellationCallback=function(a){};a.prototype._captureStackTrace=function(){};a.prototype._attachExtraTrace=function(){};a.prototype._dereferenceTrace=function(){};a.prototype._clearCancellationData=function(){};a.prototype._propagateFrom=function(a,c){};var la=function(a,c){0!=(2&c)&&a._isBound()&&this._setBoundTo(a._boundTo)},Y=function(){return!1},
ra=/[\/<\(]([^:\/]+):(\d+):(?:\d+)\)?\s*$/;x.inherits(B,Error);c.CapturedTrace=B;B.prototype.uncycle=function(){var a=this._length;if(!(2>a)){var c=[],b={},d=0;for(a=this;void 0!==a;++d)c.push(a),a=a._parent;for(d=(a=this._length=d)-1;0<=d;--d){var g=c[d].stack;void 0===b[g]&&(b[g]=d)}for(d=0;d<a;++d)if(g=b[c[d].stack],void 0!==g&&g!==d){0<g&&(c[g-1]._parent=void 0,c[g-1]._length=1);c[d]._parent=void 0;c[d]._length=1;b=0<d?c[d-1]:this;g<a-1?(b._parent=c[g+1],b._parent.uncycle(),b._length=b._parent._length+
1):(b._parent=void 0,b._length=1);a=b._length+1;for(d-=2;0<=d;--d)c[d]._length=a,a++;break}}};B.prototype.attachExtraTrace=function(a){if(!a.__stackCleaned__){this.uncycle();var c=E(a),b=c.message;c=[c.stack];for(var d=this;void 0!==d;)c.push(F(d.stack.split("\n"))),d=d._parent;!function(a){for(var c=a[0],b=1;b<a.length;++b){for(var d=a[b],g=c.length-1,l=c[g],n=-1,e=d.length-1;0<=e;--e)if(d[e]===l){n=e;break}for(e=n;0<=e&&c[g]===d[e];--e)c.pop(),g--;c=d}}(c);(function(a){for(var c=0;c<a.length;++c)(0===
a[c].length||c+1<a.length&&a[c][0]===a[c+1][0])&&(a.splice(c,1),c--)})(c);x.notEnumerableProp(a,"stack",function(a,c){for(var b=0;b<c.length-1;++b)c[b].push("From previous event:"),c[b]=c[b].join("\n");return b<c.length&&(c[b]=c[b].join("\n")),a+"\n"+c.join("\n")}(b,c));x.notEnumerableProp(a,"__stackCleaned__",!0)}};var ea=function(){var a=/^\s*at\s*/,c=function(a,c){return"string"==typeof a?a:void 0!==c.name&&void 0!==c.message?c.toString():y(c)};if("number"==typeof Error.stackTraceLimit&&"function"==
typeof Error.captureStackTrace){Error.stackTraceLimit+=6;S=a;T=c;var b=Error.captureStackTrace;return Y=function(a){return fa.test(a)},function(a,c){Error.stackTraceLimit+=6;b(a,c);Error.stackTraceLimit-=6}}var d=Error();if("string"==typeof d.stack&&0<=d.stack.split("\n")[0].indexOf("stackDetection@"))return S=/@/,T=c,ca=!0,function(a){a.stack=Error().stack};try{throw Error();}catch(Z){var g="stack"in Z}return"stack"in d||!g||"number"!=typeof Error.stackTraceLimit?(T=function(a,c){return"string"==
typeof a?a:"object"!=typeof c&&"function"!=typeof c||void 0===c.name||void 0===c.message?y(c):c.toString()},null):(S=a,T=c,function(a){Error.stackTraceLimit+=6;try{throw Error();}catch(va){a.stack=va.stack}Error.stackTraceLimit-=6})}();"undefined"!=typeof console&&void 0!==console.warn&&(D=function(a){console.warn(a)},x.isNode&&k.stderr.isTTY?D=function(a,c){console.warn((c?"\u001b[33m":"\u001b[31m")+a+"\u001b[0m\n")}:x.isNode||"string"!=typeof Error().stack||(D=function(a,c){console.warn("%c"+a,
c?"color: darkorange":"color: red")}));var C={warnings:ha,longStackTraces:!1,cancellation:!1,monitoring:!1,asyncHooks:!1};return X&&a.longStackTraces(),{asyncHooks:function(){return C.asyncHooks},longStackTraces:function(){return C.longStackTraces},warnings:function(){return C.warnings},cancellation:function(){return C.cancellation},monitoring:function(){return C.monitoring},propagateFromFunction:function(){return la},boundValueFunction:function(){return A},checkForgottenReturns:function(a,c,b,d,
g){if(void 0===a&&null!==c&&aa&&!(void 0!==g&&g._returnedNonUndefined()||0==(65535&d._bitField))){b&&(b+=" ");g=a="";if(c._trace){for(var l=c._trace.stack.split("\n"),n=F(l),e=n.length-1;0<=e;--e){var r=n[e];if(!sa.test(r)){(e=r.match(ta))&&(a="at "+e[1]+":"+e[2]+":"+e[3]+" ");break}}if(0<n.length)for(n=n[0],e=0;e<l.length;++e)if(l[e]===n){0<e&&(g="\n"+l[e-1]);break}}d._warn("a promise was created in a "+b+"handler "+a+"but was not returned from it, see http://goo.gl/rRqMUw"+g,!0,c)}},setBounds:function(a,
c){if(t()){a=(a.stack||"").split("\n");c=(c.stack||"").split("\n");for(var b=-1,d=-1,g=0;g<a.length;++g)if(n=O(a[g])){var l=n.fileName;b=n.line;break}for(g=0;g<c.length;++g){var n;if(n=O(c[g])){var e=n.fileName;d=n.line;break}}0>b||0>d||!l||!e||l!==e||b>=d||(Y=function(a){if(fa.test(a))return!0;a=O(a);return!!(a&&a.fileName===l&&b<=a.line&&a.line<=d)})}},warn:v,deprecated:function(a,c){a+=" is deprecated and will be removed in a future version.";return c&&(a+=" Use "+c+" instead."),v(a)},CapturedTrace:B,
fireDomEvent:ja,fireGlobalEvent:ka}}},{"./errors":12,"./es5":13,"./util":36}],10:[function(b,e,h){e.exports=function(a){function c(){return this.value}function b(){throw this.reason;}a.prototype.return=a.prototype.thenReturn=function(b){return b instanceof a&&b.suppressUnhandledRejections(),this._then(c,void 0,void 0,{value:b},void 0)};a.prototype.throw=a.prototype.thenThrow=function(a){return this._then(b,void 0,void 0,{reason:a},void 0)};a.prototype.catchThrow=function(a){if(1>=arguments.length)return this._then(void 0,
b,void 0,{reason:a},void 0);var c=arguments[1];return this.caught(a,function(){throw c;})};a.prototype.catchReturn=function(b){if(1>=arguments.length)return b instanceof a&&b.suppressUnhandledRejections(),this._then(void 0,c,void 0,{value:b},void 0);var d=arguments[1];d instanceof a&&d.suppressUnhandledRejections();return this.caught(b,function(){return d})}}},{}],11:[function(b,e,h){e.exports=function(a,c){function b(){return e(this)}var d=a.reduce,e=a.all;a.prototype.each=function(a){return d(this,
a,c,0)._then(b,void 0,void 0,this,void 0)};a.prototype.mapSeries=function(a){return d(this,a,c,c)};a.each=function(a,l){return d(a,l,c,0)._then(b,void 0,void 0,a,void 0)};a.mapSeries=function(a,b){return d(a,b,c,c)}}},{}],12:[function(b,e,h){function a(a,c){function b(d){if(!(this instanceof b))return new b(d);z(this,"message","string"==typeof d?d:c);z(this,"name",a);Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):Error.call(this)}return d(b,Error),b}function c(a){if(!(this instanceof
c))return new c(a);z(this,"name","OperationalError");z(this,"message",a);this.cause=a;this.isOperational=!0;a instanceof Error?(z(this,"message",a.message),z(this,"stack",a.stack)):Error.captureStackTrace&&Error.captureStackTrace(this,this.constructor)}h=b("./es5");var l=h.freeze;b=b("./util");var d=b.inherits,z=b.notEnumerableProp;b=a("Warning","warning");var u=a("CancellationError","cancellation error"),p=a("TimeoutError","timeout error"),f=a("AggregateError","aggregate error");try{var g=TypeError;
var n=RangeError}catch(I){g=a("TypeError","type error"),n=a("RangeError","range error")}for(var r="join pop push shift unshift slice filter forEach some every map indexOf lastIndexOf reduce reduceRight sort reverse".split(" "),k=0;k<r.length;++k)"function"==typeof Array.prototype[r[k]]&&(f.prototype[r[k]]=Array.prototype[r[k]]);h.defineProperty(f.prototype,"length",{value:0,configurable:!1,writable:!0,enumerable:!0});f.prototype.isOperational=!0;var A=0;f.prototype.toString=function(){var a=Array(4*
A+1).join(" "),c="\n"+a+"AggregateError of:\n";A++;a=Array(4*A+1).join(" ");for(var b=0;b<this.length;++b){for(var d=(this[b]===this?"[Circular AggregateError]":this[b]+"").split("\n"),g=0;g<d.length;++g)d[g]=a+d[g];c+=d.join("\n")+"\n"}return A--,c};d(c,Error);(r=Error.__BluebirdErrorTypes__)||(r=l({CancellationError:u,TimeoutError:p,OperationalError:c,RejectionError:c,AggregateError:f}),h.defineProperty(Error,"__BluebirdErrorTypes__",{value:r,writable:!1,enumerable:!1,configurable:!1}));e.exports=
{Error,TypeError:g,RangeError:n,CancellationError:r.CancellationError,OperationalError:r.OperationalError,TimeoutError:r.TimeoutError,AggregateError:r.AggregateError,Warning:b}},{"./es5":13,"./util":36}],13:[function(b,e,h){if(b=function(){return void 0===this}())e.exports={freeze:Object.freeze,defineProperty:Object.defineProperty,getDescriptor:Object.getOwnPropertyDescriptor,keys:Object.keys,names:Object.getOwnPropertyNames,getPrototypeOf:Object.getPrototypeOf,isArray:Array.isArray,isES5:b,propertyIsWritable:function(a,
c){a=Object.getOwnPropertyDescriptor(a,c);return!(a&&!a.writable&&!a.set)}};else{var a={}.hasOwnProperty,c={}.toString,l={}.constructor.prototype;h=function(c){var b=[],d;for(d in c)a.call(c,d)&&b.push(d);return b};e.exports={isArray:function(a){try{return"[object Array]"===c.call(a)}catch(z){return!1}},keys:h,names:h,defineProperty:function(a,c,b){return a[c]=b.value,a},getDescriptor:function(a,c){return{value:a[c]}},freeze:function(a){return a},getPrototypeOf:function(a){try{return Object(a).constructor.prototype}catch(z){return l}},
isES5:b,propertyIsWritable:function(){return!0}}}},{}],14:[function(b,e,h){e.exports=function(a,c){var b=a.map;a.prototype.filter=function(a,l){return b(this,a,l,c)};a.filter=function(a,l,e){return b(a,l,e,c)}}},{}],15:[function(b,e,h){e.exports=function(a,c,l){function d(a,c,b){this.promise=a;this.type=c;this.handler=b;this.called=!1;this.cancelPromise=null}function e(a){this.finallyHandler=a}function h(a,c){return null!=a.cancelPromise&&(1<arguments.length?a.cancelPromise._reject(c):a.cancelPromise._cancel(),
a.cancelPromise=null,!0)}function p(){return g.call(this,this.promise._target()._settledValue())}function f(a){if(!h(this,a))return k.e=a,k}function g(b){var d=this.promise,g=this.handler;if(!this.called){this.called=!0;g=this.isFinallyHandler()?g.call(d._boundValue()):g.call(d._boundValue(),b);if(g===l)return g;if(void 0!==g&&(d._setReturnedNonUndefined(),g=c(g,d),g instanceof a)){if(null!=this.cancelPromise){if(g._isCancelled())return b=new r("late cancellation observer"),d._attachExtraTrace(b),
k.e=b,k;g.isPending()&&g._attachCancellationCallback(new e(this))}return g._then(p,f,void 0,this,void 0)}}return d.isRejected()?(h(this),k.e=b,k):(h(this),b)}var n=b("./util"),r=a.CancellationError,k=n.errorObj,A=b("./catch_filter")(l);return d.prototype.isFinallyHandler=function(){return 0===this.type},e.prototype._resultCancelled=function(){h(this.finallyHandler)},a.prototype._passThrough=function(a,c,b,g){return"function"!=typeof a?this.then():this._then(b,g,void 0,new d(this,c,a),void 0)},a.prototype.lastly=
a.prototype.finally=function(a){return this._passThrough(a,0,g,g)},a.prototype.tap=function(a){return this._passThrough(a,1,g)},a.prototype.tapCatch=function(c){var b=arguments.length;if(1===b)return this._passThrough(c,1,void 0,g);var d,l=Array(b-1),e=0;for(d=0;d<b-1;++d){var r=arguments[d];if(!n.isObject(r))return a.reject(new TypeError("tapCatch statement predicate: expecting an object but got "+n.classString(r)));l[e++]=r}l.length=e;return this._passThrough(A(l,arguments[d],this),1,void 0,g)},
d}},{"./catch_filter":7,"./util":36}],16:[function(b,e,h){e.exports=function(a,c,l,d,e,h){function p(c,b,d,g){if(h.cancellation()){var n=new a(l),e=this._finallyPromise=new a(l);this._promise=n.lastly(function(){return e});n._captureStackTrace();n._setOnCancel(this)}else(this._promise=new a(l))._captureStackTrace();this._stack=g;this._generatorFunction=c;this._receiver=b;this._generator=void 0;this._yieldHandlers="function"==typeof d?[d].concat(f):f;this._yieldedPromise=null;this._cancellationPhase=
!1}var u=b("./errors").TypeError,g=b("./util"),n=g.errorObj,r=g.tryCatch,f=[];g.inherits(p,e);p.prototype._isResolved=function(){return null===this._promise};p.prototype._cleanup=function(){this._promise=this._generator=null;h.cancellation()&&null!==this._finallyPromise&&(this._finallyPromise._fulfill(),this._finallyPromise=null)};p.prototype._promiseCancelled=function(){if(!this._isResolved()){if(void 0!==this._generator.return){this._promise._pushContext();var c=r(this._generator.return).call(this._generator,
void 0)}else c=new a.CancellationError("generator .return() sentinel"),a.coroutine.returnSentinel=c,this._promise._attachExtraTrace(c),this._promise._pushContext(),c=r(this._generator.throw).call(this._generator,c);this._promise._popContext();this._cancellationPhase=!0;this._yieldedPromise=null;this._continue(c)}};p.prototype._promiseFulfilled=function(a){this._yieldedPromise=null;this._promise._pushContext();a=r(this._generator.next).call(this._generator,a);this._promise._popContext();this._continue(a)};
p.prototype._promiseRejected=function(a){this._yieldedPromise=null;this._promise._attachExtraTrace(a);this._promise._pushContext();a=r(this._generator.throw).call(this._generator,a);this._promise._popContext();this._continue(a)};p.prototype._resultCancelled=function(){if(this._yieldedPromise instanceof a){var c=this._yieldedPromise;this._yieldedPromise=null;c.cancel()}};p.prototype.promise=function(){return this._promise};p.prototype._run=function(){this._generator=this._generatorFunction.call(this._receiver);
this._receiver=this._generatorFunction=void 0;this._promiseFulfilled(void 0)};p.prototype._continue=function(c){var b=this._promise;if(c===n)return this._cleanup(),this._cancellationPhase?b.cancel():b._rejectCallback(c.e,!1);var g=c.value;if(!0===c.done)return this._cleanup(),this._cancellationPhase?b.cancel():b._resolveCallback(g);c=d(g,this._promise);if(!(b=c instanceof a)){a:{b=c;var l=this._yieldHandlers;c=this._promise;for(var e=0;e<l.length;++e){c._pushContext();var h=r(l[e])(b);if(c._popContext(),
h===n){c._pushContext();b=a.reject(n.e);c=(c._popContext(),b);break a}h=d(h,c);if(h instanceof a){c=h;break a}}c=null}b=null!==c}b?(g=(c=c._target())._bitField,0==(50397184&g)?(this._yieldedPromise=c,c._proxy(this,null)):0!=(33554432&g)?a._async.invoke(this._promiseFulfilled,this,c._value()):0!=(16777216&g)?a._async.invoke(this._promiseRejected,this,c._reason()):this._promiseCancelled()):this._promiseRejected(new u("A value %s was yielded that could not be treated as a promise\n\n    See http://goo.gl/MqrFmX\n\n".replace("%s",
String(g))+"From coroutine:\n"+this._stack.split("\n").slice(1,-7).join("\n")))};a.coroutine=function(a,c){if("function"!=typeof a)throw new u("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");var b=Object(c).yieldHandler,d=Error().stack;return function(){var c=a.apply(this,arguments),g=new p(void 0,void 0,b,d),l=g.promise();return g._generator=c,g._promiseFulfilled(void 0),l}};a.coroutine.addYieldHandler=function(a){if("function"!=typeof a)throw new u("expecting a function but got "+
g.classString(a));f.push(a)};a.spawn=function(b){if(h.deprecated("Promise.spawn()","Promise.coroutine()"),"function"!=typeof b)return c("generatorFunction must be a function\n\n    See http://goo.gl/MqrFmX\n");b=new p(b,this);var d=b.promise();return b._run(a.spawn),d}}},{"./errors":12,"./util":36}],17:[function(b,e,h){e.exports=function(a,c,l,d,e){l=b("./util");l.canEvaluate;l.tryCatch;l.errorObj;a.join=function(){var a,b=arguments.length-1;0<b&&"function"==typeof arguments[b]&&(a=arguments[b]);
b=[].slice.call(arguments);a&&b.pop();b=(new c(b)).promise();return void 0!==a?b.spread(a):b}}},{"./util":36}],18:[function(b,e,h){e.exports=function(a,c,l,d,e,h){function p(c,b,d,l){this.constructor$(c);this._promise._captureStackTrace();var n=a._getContext();if(this._callback=g.contextBind(n,b),this._preservedValues=l===e?Array(this.length()):null,this._limit=d,this._inFlight=0,this._queue=[],u.invoke(this._asyncInit,this,void 0),g.isArray(c))for(b=0;b<c.length;++b)d=c[b],d instanceof a&&d.suppressUnhandledRejections()}
function f(c,b,d,e){if("function"!=typeof b)return l("expecting a function but got "+g.classString(b));var n=0;if(void 0!==d){if("object"!=typeof d||null===d)return a.reject(new TypeError("options argument must be an object but it is "+g.classString(d)));if("number"!=typeof d.concurrency)return a.reject(new TypeError("'concurrency' must be a number but it is "+g.classString(d.concurrency)));n=d.concurrency}return(new p(c,b,"number"==typeof n&&isFinite(n)&&1<=n?n:0,e)).promise()}var g=b("./util"),
n=g.tryCatch,r=g.errorObj,u=a._async;g.inherits(p,c);p.prototype._asyncInit=function(){this._init$(void 0,-2)};p.prototype._init=function(){};p.prototype._promiseFulfilled=function(c,b){var g=this._values,l=this.length(),e=this._preservedValues,p=this._limit;if(0>b){if(g[b=-1*b-1]=c,1<=p&&(this._inFlight--,this._drainQueue(),this._isResolved()))return!0}else{if(1<=p&&this._inFlight>=p)return g[b]=c,this._queue.push(b),!1;null!==e&&(e[b]=c);var f=this._promise,u=this._callback,G=f._boundValue();f._pushContext();
c=n(u).call(G,c,b,l);u=f._popContext();if(h.checkForgottenReturns(c,u,null!==e?"Promise.filter":"Promise.map",f),c===r)return this._reject(c.e),!0;f=d(c,this._promise);if(f instanceof a){c=(f=f._target())._bitField;if(0==(50397184&c))return 1<=p&&this._inFlight++,g[b]=f,f._proxy(this,-1*(b+1)),!1;if(0==(33554432&c))return 0!=(16777216&c)?(this._reject(f._reason()),!0):(this._cancel(),!0);c=f._value()}g[b]=c}return++this._totalResolved>=l&&(null!==e?this._filter(g,e):this._resolve(g),!0)};p.prototype._drainQueue=
function(){for(var a=this._queue,c=this._limit,b=this._values;0<a.length&&this._inFlight<c&&!this._isResolved();){var d=a.pop();this._promiseFulfilled(b[d],d)}};p.prototype._filter=function(a,c){for(var b=c.length,d=Array(b),g=0,l=0;l<b;++l)a[l]&&(d[g++]=c[l]);d.length=g;this._resolve(d)};p.prototype.preservedValues=function(){return this._preservedValues};a.prototype.map=function(a,c){return f(this,a,c,null)};a.map=function(a,c,b,d){return f(a,c,b,d)}}},{"./util":36}],19:[function(b,e,h){e.exports=
function(a,c,l,d,e){var h=b("./util"),p=h.tryCatch;a.method=function(b){if("function"!=typeof b)throw new a.TypeError("expecting a function but got "+h.classString(b));return function(){var d=new a(c);d._captureStackTrace();d._pushContext();var l=p(b).apply(this,arguments),r=d._popContext();return e.checkForgottenReturns(l,r,"Promise.method",d),d._resolveFromSyncValue(l),d}};a.attempt=a.try=function(b){if("function"!=typeof b)return d("expecting a function but got "+h.classString(b));var g=new a(c);
if(g._captureStackTrace(),g._pushContext(),1<arguments.length){e.deprecated("calling Promise.try with more than 1 argument");var l=arguments[1];var r=arguments[2];l=h.isArray(l)?p(b).apply(r,l):p(b).call(r,l)}else l=p(b)();r=g._popContext();return e.checkForgottenReturns(l,r,"Promise.try",g),g._resolveFromSyncValue(l),g};a.prototype._resolveFromSyncValue=function(a){a===h.errorObj?this._rejectCallback(a.e,!1):this._resolveCallback(a,!0)}}},{"./util":36}],20:[function(b,e,h){var a=b("./util"),c=a.maybeWrapAsError,
l=b("./errors").OperationalError,d=b("./es5"),f=/^(?:name|message|stack|cause)$/;e.exports=function(b,e){return function(h,g){if(null!==b){if(h){var n=c(h);var r;if(n instanceof Error&&d.getPrototypeOf(n)===Error.prototype){(r=new l(n)).name=n.name;r.message=n.message;r.stack=n.stack;for(var p=d.keys(n),k=0;k<p.length;++k){var u=p[k];f.test(u)||(r[u]=n[u])}n=r}else n=(a.markAsOriginatingFromRejection(n),n);b._attachExtraTrace(n);b._reject(n)}else e?(n=[].slice.call(arguments,1),b._fulfill(n)):b._fulfill(g);
b=null}}}},{"./errors":12,"./es5":13,"./util":36}],21:[function(b,e,h){e.exports=function(a){function c(a,c){if(!e.isArray(a))return l.call(this,a,c);a=p(c).apply(this._boundValue(),[null].concat(a));a===f&&h.throwLater(a.e)}function l(a,c){var b=this._boundValue();a=void 0===a?p(c).call(b,null):p(c).call(b,null,a);a===f&&h.throwLater(a.e)}function d(a,c){if(!a){var b=Error(a+"");b.cause=a;a=b}a=p(c).call(this._boundValue(),a);a===f&&h.throwLater(a.e)}var e=b("./util"),h=a._async,p=e.tryCatch,f=e.errorObj;
a.prototype.asCallback=a.prototype.nodeify=function(a,b){if("function"==typeof a){var g=l;void 0!==b&&Object(b).spread&&(g=c);this._then(g,d,void 0,this,a)}return this}}},{"./util":36}],22:[function(b,e,h){e.exports=function(){function a(){}function c(a){if(a!==y){if(null==this||this.constructor!==c)throw new J("the promise constructor cannot be invoked directly\n\n    See http://goo.gl/MqrFmX\n");if("function"!=typeof a)throw new J("expecting a function but got "+n.classString(a));}this._bitField=
0;this._receiver0=this._promise0=this._rejectionHandler0=this._fulfillmentHandler0=void 0;this._resolveFromExecutor(a);this._promiseCreated();this._fireEvent("promiseCreated",this)}function l(a){this.promise._resolveCallback(a)}function d(a){this.promise._rejectCallback(a,!1)}function h(a){var b=new c(y);b._fulfillmentHandler0=a;b._rejectionHandler0=a;b._promise0=a;b._receiver0=a}var f=function(){return new J("circular promise resolution chain\n\n    See http://goo.gl/MqrFmX\n")},p=function(){return new c.PromiseInspection(this._target())},
m=function(a){return c.reject(new J(a))},g={},n=b("./util");n.setReflectHandler(p);var r=function(){var a=k.domain;return void 0===a?null:a},P=function(){return{domain:r(),async:null}},A=n.isNode&&n.nodeSupportsAsyncResource?b("async_hooks").AsyncResource:null,I=function(){return{domain:r(),async:new A("Bluebird::Promise")}},v=n.isNode?P:function(){return null};n.notEnumerableProp(c,"_getContext",v);var q=b("./es5"),t=b("./async"),F=new t;q.defineProperty(c,"_async",{value:F});var E=b("./errors"),
J=c.TypeError=E.TypeError;c.RangeError=E.RangeError;var G=c.CancellationError=E.CancellationError;c.TimeoutError=E.TimeoutError;c.OperationalError=E.OperationalError;c.RejectionError=E.OperationalError;c.AggregateError=E.AggregateError;var y=function(){},da={},O={},B=b("./thenables")(c,y),H=b("./promise_array")(c,y,B,m,a);E=b("./context")(c);var U=E.create,D=b("./debuggability")(c,E,function(){v=I;n.notEnumerableProp(c,"_getContext",I)},function(){v=P;n.notEnumerableProp(c,"_getContext",P)}),W=(D.CapturedTrace,
b("./finally")(c,B,O)),N=b("./catch_filter")(O),R=b("./nodeback"),x=n.errorObj,L=n.tryCatch;return c.prototype.toString=function(){return"[object Promise]"},c.prototype.caught=c.prototype.catch=function(a){var c=arguments.length;if(1<c){var b,d=Array(c-1),g=0;for(b=0;b<c-1;++b){var l=arguments[b];if(!n.isObject(l))return m("Catch statement predicate: expecting an object but got "+n.classString(l));d[g++]=l}if(d.length=g,"function"!=typeof(a=arguments[b]))throw new J("The last argument to .catch() must be a function, got "+
n.toString(a));return this.then(void 0,N(d,a,this))}return this.then(void 0,a)},c.prototype.reflect=function(){return this._then(p,p,void 0,this,void 0)},c.prototype.then=function(a,c){if(D.warnings()&&0<arguments.length&&"function"!=typeof a&&"function"!=typeof c){var b=".then() only accepts functions but was passed: "+n.classString(a);1<arguments.length&&(b+=", "+n.classString(c));this._warn(b)}return this._then(a,c,void 0,void 0,void 0)},c.prototype.done=function(a,c){this._then(a,c,void 0,void 0,
void 0)._setIsFinal()},c.prototype.spread=function(a){return"function"!=typeof a?m("expecting a function but got "+n.classString(a)):this.all()._then(a,void 0,void 0,da,void 0)},c.prototype.toJSON=function(){var a={isFulfilled:!1,isRejected:!1,fulfillmentValue:void 0,rejectionReason:void 0};return this.isFulfilled()?(a.fulfillmentValue=this.value(),a.isFulfilled=!0):this.isRejected()&&(a.rejectionReason=this.reason(),a.isRejected=!0),a},c.prototype.all=function(){return 0<arguments.length&&this._warn(".all() was passed arguments but it does not take any"),
(new H(this)).promise()},c.prototype.error=function(a){return this.caught(n.originatesFromRejection,a)},c.getNewLibraryCopy=e.exports,c.is=function(a){return a instanceof c},c.fromNode=c.fromCallback=function(a){var b=new c(y);b._captureStackTrace();var d=1<arguments.length&&!!Object(arguments[1]).multiArgs;d=L(a)(R(b,d));return d===x&&b._rejectCallback(d.e,!0),b._isFateSealed()||b._setAsyncGuaranteed(),b},c.all=function(a){return(new H(a)).promise()},c.cast=function(a){var b=B(a);return b instanceof
c||((b=new c(y))._captureStackTrace(),b._setFulfilled(),b._rejectionHandler0=a),b},c.resolve=c.fulfilled=c.cast,c.reject=c.rejected=function(a){var b=new c(y);return b._captureStackTrace(),b._rejectCallback(a,!0),b},c.setScheduler=function(a){if("function"!=typeof a)throw new J("expecting a function but got "+n.classString(a));return F.setScheduler(a)},c.prototype._then=function(a,b,d,g,l){var e=void 0!==l;l=e?l:new c(y);d=this._target();var h=d._bitField;e||(l._propagateFrom(this,3),l._captureStackTrace(),
void 0===g&&0!=(2097152&this._bitField)&&(g=0!=(50397184&h)?this._boundValue():d===this?void 0:this._boundTo),this._fireEvent("promiseChained",this,l));e=v();if(0!=(50397184&h)){var r,f,p=d._settlePromiseCtx;0!=(33554432&h)?(f=d._rejectionHandler0,r=a):0!=(16777216&h)?(f=d._fulfillmentHandler0,r=b,d._unsetRejectionIsUnhandled()):(p=d._settlePromiseLateCancellationObserver,f=new G("late cancellation observer"),d._attachExtraTrace(f),r=b);F.invoke(p,d,{handler:n.contextBind(e,r),promise:l,receiver:g,
value:f})}else d._addCallbacks(a,b,l,g,e);return l},c.prototype._length=function(){return 65535&this._bitField},c.prototype._isFateSealed=function(){return 0!=(117506048&this._bitField)},c.prototype._isFollowing=function(){return 67108864==(67108864&this._bitField)},c.prototype._setLength=function(a){this._bitField=-65536&this._bitField|65535&a},c.prototype._setFulfilled=function(){this._bitField|=33554432;this._fireEvent("promiseFulfilled",this)},c.prototype._setRejected=function(){this._bitField|=
16777216;this._fireEvent("promiseRejected",this)},c.prototype._setFollowing=function(){this._bitField|=67108864;this._fireEvent("promiseResolved",this)},c.prototype._setIsFinal=function(){this._bitField|=4194304},c.prototype._isFinal=function(){return 0<(4194304&this._bitField)},c.prototype._unsetCancelled=function(){this._bitField&=-65537},c.prototype._setCancelled=function(){this._bitField|=65536;this._fireEvent("promiseCancelled",this)},c.prototype._setWillBeCancelled=function(){this._bitField|=
8388608},c.prototype._setAsyncGuaranteed=function(){if(!F.hasCustomScheduler()){var a=this._bitField;this._bitField=a|(536870912&a)>>2^134217728}},c.prototype._setNoAsyncGuarantee=function(){this._bitField=-134217729&(536870912|this._bitField)},c.prototype._receiverAt=function(a){a=0===a?this._receiver0:this[4*a-4+3];if(a!==g)return void 0===a&&this._isBound()?this._boundValue():a},c.prototype._promiseAt=function(a){return this[4*a-4+2]},c.prototype._fulfillmentHandlerAt=function(a){return this[4*
a-4]},c.prototype._rejectionHandlerAt=function(a){return this[4*a-4+1]},c.prototype._boundValue=function(){},c.prototype._migrateCallback0=function(a){a._bitField;var c=a._fulfillmentHandler0,b=a._rejectionHandler0,d=a._promise0;a=a._receiverAt(0);void 0===a&&(a=g);this._addCallbacks(c,b,d,a,null)},c.prototype._migrateCallbackAt=function(a,c){var b=a._fulfillmentHandlerAt(c),d=a._rejectionHandlerAt(c),l=a._promiseAt(c);a=a._receiverAt(c);void 0===a&&(a=g);this._addCallbacks(b,d,l,a,null)},c.prototype._addCallbacks=
function(a,c,b,d,g){var l=this._length();if(65531<=l&&(l=0,this._setLength(0)),0===l)this._promise0=b,this._receiver0=d,"function"==typeof a&&(this._fulfillmentHandler0=n.contextBind(g,a)),"function"==typeof c&&(this._rejectionHandler0=n.contextBind(g,c));else{var e=4*l-4;this[e+2]=b;this[e+3]=d;"function"==typeof a&&(this[e+0]=n.contextBind(g,a));"function"==typeof c&&(this[e+1]=n.contextBind(g,c))}return this._setLength(l+1),l},c.prototype._proxy=function(a,c){this._addCallbacks(void 0,void 0,c,
a,null)},c.prototype._resolveCallback=function(a,b){if(0==(117506048&this._bitField)){if(a===this)return this._rejectCallback(f(),!1);var d=B(a,this);if(!(d instanceof c))return this._fulfill(a);b&&this._propagateFrom(d,2);a=d._target();if(a!==this)if(b=a._bitField,0==(50397184&b)){b=this._length();0<b&&a._migrateCallback0(this);for(var g=1;g<b;++g)a._migrateCallbackAt(this,g);this._setFollowing();this._setLength(0);this._setFollowee(d)}else 0!=(33554432&b)?this._fulfill(a._value()):0!=(16777216&
b)?this._reject(a._reason()):(d=new G("late cancellation observer"),a._attachExtraTrace(d),this._reject(d));else this._reject(f())}},c.prototype._rejectCallback=function(a,c,b){var d=n.ensureErrorObject(a),g=d===a;g||b||!D.warnings()||(b="a promise was rejected with a non-error: "+n.classString(a),this._warn(b,!0));this._attachExtraTrace(d,!!c&&g);this._reject(a)},c.prototype._resolveFromExecutor=function(a){if(a!==y){var c=this;this._captureStackTrace();this._pushContext();var b=!0;a=this._execute(a,
function(a){c._resolveCallback(a)},function(a){c._rejectCallback(a,b)});b=!1;this._popContext();void 0!==a&&c._rejectCallback(a,!0)}},c.prototype._settlePromiseFromHandler=function(a,c,b,d){if(0==(65536&d._bitField)){var g;d._pushContext();c===da?b&&"number"==typeof b.length?g=L(a).apply(this._boundValue(),b):(g=x).e=new J("cannot .spread() a non-array: "+n.classString(b)):g=L(a).call(c,b);a=d._popContext();0==(65536&d._bitField)&&(g===O?d._reject(b):g===x?d._rejectCallback(g.e,!1):(D.checkForgottenReturns(g,
a,"",d,this),d._resolveCallback(g)))}},c.prototype._target=function(){for(var a=this;a._isFollowing();)a=a._followee();return a},c.prototype._followee=function(){return this._rejectionHandler0},c.prototype._setFollowee=function(a){this._rejectionHandler0=a},c.prototype._settlePromise=function(b,d,g,l){var e=b instanceof c,n=this._bitField,h=0!=(134217728&n);0!=(65536&n)?(e&&b._invokeInternalOnCancel(),g instanceof W&&g.isFinallyHandler()?(g.cancelPromise=b,L(d).call(g,l)===x&&b._reject(x.e)):d===
p?b._fulfill(p.call(g)):g instanceof a?g._promiseCancelled(b):e||b instanceof H?b._cancel():g.cancel()):"function"==typeof d?e?(h&&b._setAsyncGuaranteed(),this._settlePromiseFromHandler(d,g,l,b)):d.call(g,l,b):g instanceof a?g._isResolved()||(0!=(33554432&n)?g._promiseFulfilled(l,b):g._promiseRejected(l,b)):e&&(h&&b._setAsyncGuaranteed(),0!=(33554432&n)?b._fulfill(l):b._reject(l))},c.prototype._settlePromiseLateCancellationObserver=function(a){var b=a.handler,d=a.promise,g=a.receiver;a=a.value;"function"==
typeof b?d instanceof c?this._settlePromiseFromHandler(b,g,a,d):b.call(g,a,d):d instanceof c&&d._reject(a)},c.prototype._settlePromiseCtx=function(a){this._settlePromise(a.promise,a.handler,a.receiver,a.value)},c.prototype._settlePromise0=function(a,c,b){b=this._promise0;var d=this._receiverAt(0);this._receiver0=this._promise0=void 0;this._settlePromise(b,a,d,c)},c.prototype._clearCallbackDataAtIndex=function(a){a=4*a-4;this[a+2]=this[a+3]=this[a+0]=this[a+1]=void 0},c.prototype._fulfill=function(a){var c=
this._bitField;if(!((117506048&c)>>>16)){if(a===this)return a=f(),this._attachExtraTrace(a),this._reject(a);this._setFulfilled();this._rejectionHandler0=a;0<(65535&c)&&(0!=(134217728&c)?this._settlePromises():F.settlePromises(this),this._dereferenceTrace())}},c.prototype._reject=function(a){var c=this._bitField;if(!((117506048&c)>>>16)){if(this._setRejected(),this._fulfillmentHandler0=a,this._isFinal())return F.fatalError(a,n.isNode);0<(65535&c)?F.settlePromises(this):this._ensurePossibleRejectionHandled()}},
c.prototype._fulfillPromises=function(a,c){for(var b=1;b<a;b++){var d=this._fulfillmentHandlerAt(b),g=this._promiseAt(b),l=this._receiverAt(b);this._clearCallbackDataAtIndex(b);this._settlePromise(g,d,l,c)}},c.prototype._rejectPromises=function(a,c){for(var b=1;b<a;b++){var d=this._rejectionHandlerAt(b),g=this._promiseAt(b),l=this._receiverAt(b);this._clearCallbackDataAtIndex(b);this._settlePromise(g,d,l,c)}},c.prototype._settlePromises=function(){var a=this._bitField,c=65535&a;if(0<c){if(0!=(16842752&
a)){var b=this._fulfillmentHandler0;this._settlePromise0(this._rejectionHandler0,b,a);this._rejectPromises(c,b)}else b=this._rejectionHandler0,this._settlePromise0(this._fulfillmentHandler0,b,a),this._fulfillPromises(c,b);this._setLength(0)}this._clearCancellationData()},c.prototype._settledValue=function(){var a=this._bitField;return 0!=(33554432&a)?this._rejectionHandler0:0!=(16777216&a)?this._fulfillmentHandler0:void 0},"undefined"!=typeof Symbol&&Symbol.toStringTag&&q.defineProperty(c.prototype,
Symbol.toStringTag,{get:function(){return"Object"}}),c.defer=c.pending=function(){return D.deprecated("Promise.defer","new Promise"),{promise:new c(y),resolve:l,reject:d}},n.notEnumerableProp(c,"_makeSelfResolutionError",f),b("./method")(c,y,B,m,D),b("./bind")(c,y,B,D),b("./cancel")(c,H,m,D),b("./direct_resolve")(c),b("./synchronous_inspection")(c),b("./join")(c,H,B,y,F),c.Promise=c,c.version="3.7.2",b("./call_get.js")(c),b("./generators.js")(c,m,y,B,a,D),b("./map.js")(c,H,m,B,y,D),b("./nodeify.js")(c),
b("./promisify.js")(c,y),b("./props.js")(c,H,B,m),b("./race.js")(c,y,B,m),b("./reduce.js")(c,H,m,B,y,D),b("./settle.js")(c,H,D),b("./some.js")(c,H,m),b("./timers.js")(c,y,D),b("./using.js")(c,m,B,U,y,D),b("./any.js")(c),b("./each.js")(c,y),b("./filter.js")(c,y),n.toFastProperties(c),n.toFastProperties(c.prototype),h({a:1}),h({b:2}),h({c:3}),h(1),h(function(){}),h(void 0),h(!1),h(new c(y)),D.setBounds(t.firstLineError,n.lastLineError),c}},{"./any.js":1,"./async":2,"./bind":3,"./call_get.js":5,"./cancel":6,
"./catch_filter":7,"./context":8,"./debuggability":9,"./direct_resolve":10,"./each.js":11,"./errors":12,"./es5":13,"./filter.js":14,"./finally":15,"./generators.js":16,"./join":17,"./map.js":18,"./method":19,"./nodeback":20,"./nodeify.js":21,"./promise_array":23,"./promisify.js":24,"./props.js":25,"./race.js":27,"./reduce.js":28,"./settle.js":30,"./some.js":31,"./synchronous_inspection":32,"./thenables":33,"./timers.js":34,"./using.js":35,"./util":36,async_hooks:void 0}],23:[function(b,e,h){e.exports=
function(a,c,l,d,e){function h(b){var d=this._promise=new a(c);b instanceof a&&(d._propagateFrom(b,3),b.suppressUnhandledRejections());d._setOnCancel(this);this._values=b;this._totalResolved=this._length=0;this._init(void 0,-2)}var f=b("./util");f.isArray;return f.inherits(h,e),h.prototype.length=function(){return this._length},h.prototype.promise=function(){return this._promise},h.prototype._init=function r(c,b){c=l(this._values,this._promise);if(c instanceof a){var g=(c=c._target())._bitField;if(this._values=
c,0==(50397184&g))return this._promise._setAsyncGuaranteed(),c._then(r,this._reject,void 0,this,b);if(0==(33554432&g))return 0!=(16777216&g)?this._reject(c._reason()):this._cancel();c=c._value()}null!==(c=f.asArray(c))?0!==c.length?this._iterate(c):-5===b?this._resolveEmptyArray():this._resolve(function(a){switch(a){case -2:return[];case -3:return{};case -6:return new Map}}(b)):(b=d("expecting an array or an iterable object but got "+f.classString(c)).reason(),this._promise._rejectCallback(b,!1))},
h.prototype._iterate=function(c){var b=this.getActualLength(c.length);this._length=b;this._values=this.shouldCopyValues()?Array(b):this._values;for(var d=this._promise,g=!1,e,h=0;h<b;++h){var f=l(c[h],d);e=f instanceof a?(f=f._target())._bitField:null;g?null!==e&&f.suppressUnhandledRejections():null!==e?0==(50397184&e)?(f._proxy(this,h),this._values[h]=f):g=0!=(33554432&e)?this._promiseFulfilled(f._value(),h):0!=(16777216&e)?this._promiseRejected(f._reason(),h):this._promiseCancelled(h):g=this._promiseFulfilled(f,
h)}g||d._setAsyncGuaranteed()},h.prototype._isResolved=function(){return null===this._values},h.prototype._resolve=function(a){this._values=null;this._promise._fulfill(a)},h.prototype._cancel=function(){!this._isResolved()&&this._promise._isCancellable()&&(this._values=null,this._promise._cancel())},h.prototype._reject=function(a){this._values=null;this._promise._rejectCallback(a,!1)},h.prototype._promiseFulfilled=function(a,c){return this._values[c]=a,++this._totalResolved>=this._length&&(this._resolve(this._values),
!0)},h.prototype._promiseCancelled=function(){return this._cancel(),!0},h.prototype._promiseRejected=function(a){return this._totalResolved++,this._reject(a),!0},h.prototype._resultCancelled=function(){if(!this._isResolved()){var c=this._values;if(this._cancel(),c instanceof a)c.cancel();else for(var b=0;b<c.length;++b)c[b]instanceof a&&c[b].cancel()}},h.prototype.shouldCopyValues=function(){return!0},h.prototype.getActualLength=function(a){return a},h}},{"./util":36}],24:[function(b,e,h){e.exports=
function(a,c){function l(a){return!v.test(a)}function d(a){try{return!0===a.__isPromisified__}catch(E){return!1}}function e(a,c,b,g){for(var l=k.inheritedDataKeys(a),e=[],h=0;h<l.length;++h){var n=l[h],r=a[n],f=g===q||q(n,r,a),p;(p="function"!=typeof r||d(r))||(p=k.getDataPropertyOrDefault(a,n+c,I),p=!!p&&d(p));p||!g(n,r,a,f)||e.push(n,r)}for(a=0;a<e.length;a+=2)if(g=e[a],b.test(g))for(g=g.replace(b,""),l=0;l<e.length;l+=2)if(e[l]===g)throw new A("Cannot promisify an API that has normal methods with '%s'-suffix\n\n    See http://goo.gl/MqrFmX\n".replace("%s",
c));return e}function h(a,c,b,d,g){var l=new RegExp(c.replace(/([$])/,"\\$")+"$");b=e(a,c,l,b);l=0;for(var h=b.length;l<h;l+=2){var n=b[l],r=b[l+1],p=n+c;if(d===t)a[p]=t(n,f,n,r,c,g);else{var G=d(r,function(){return t(n,f,n,r,c,g)});k.notEnumerableProp(G,"__isPromisified__",!0);a[p]=G}}return k.toFastProperties(a),a}var f={},k=b("./util"),g=b("./nodeback"),n=k.withAppended,r=k.maybeWrapAsError,m=k.canEvaluate,A=b("./errors").TypeError,I={__isPromisified__:!0},v=/^(?:arity|length|name|arguments|caller|callee|prototype|__isPromisified__)$/,
q=function(a){return k.isIdentifier(a)&&"_"!==a.charAt(0)&&"constructor"!==a},t=m?void 0:function(b,d,l,e,h,p){function G(){var l=d;d===f&&(l=this);var e=new a(c);e._captureStackTrace();var h="string"==typeof u&&this!==m?this[u]:b,k=g(e,p);try{h.apply(l,n(arguments,k))}catch(R){e._rejectCallback(r(R),!0,!0)}return e._isFateSealed()||e._setAsyncGuaranteed(),e}var m=function(){return this}(),u=b;return"string"==typeof u&&(b=e),k.notEnumerableProp(G,"__isPromisified__",!0),G};a.promisify=function(a,
c){if("function"!=typeof a)throw new A("expecting a function but got "+k.classString(a));if(d(a))return a;var b=void 0===(c=Object(c)).context?f:c.context;c=t(a,b,void 0,a,null,!!c.multiArgs);return k.copyDescriptors(a,c,l),c};a.promisifyAll=function(a,c){if("function"!=typeof a&&"object"!=typeof a)throw new A("the target of promisifyAll must be an object or a function\n\n    See http://goo.gl/MqrFmX\n");var b=!!(c=Object(c)).multiArgs,d=c.suffix;"string"!=typeof d&&(d="Async");var g=c.filter;"function"!=
typeof g&&(g=q);c=c.promisifier;if("function"!=typeof c&&(c=t),!k.isIdentifier(d))throw new RangeError("suffix must be a valid identifier\n\n    See http://goo.gl/MqrFmX\n");for(var l=k.inheritedDataKeys(a),e=0;e<l.length;++e){var n=a[l[e]];"constructor"!==l[e]&&k.isClass(n)&&(h(n.prototype,d,g,c,b),h(n,d,g,c,b))}return h(a,d,g,c,b)}}},{"./errors":12,"./nodeback":20,"./util":36}],25:[function(b,e,h){e.exports=function(a,c,l,d){function e(a){var c=!1;if(void 0!==f&&a instanceof f){var b=r(a);c=!0}else{var d=
n.keys(a),g=d.length;b=Array(2*g);for(var l=0;l<g;++l){var e=d[l];b[l]=a[e];b[l+g]=e}}this.constructor$(b);this._isMap=c;this._init$(void 0,c?-6:-3)}function h(c){var b;c=l(c);return g(c)?(b=c instanceof a?c._then(a.props,void 0,void 0,void 0,void 0):(new e(c)).promise(),c instanceof a&&b._propagateFrom(c,2),b):d("cannot await properties of a non-object\n\n    See http://goo.gl/MqrFmX\n")}var f,k=b("./util"),g=k.isObject,n=b("./es5");"function"==typeof Map&&(f=Map);var r=function(){function a(a,d){this[c]=
a;this[c+b]=d;c++}var c=0,b=0;return function(d){b=d.size;c=0;var g=Array(2*d.size);return d.forEach(a,g),g}}();k.inherits(e,c);e.prototype._init=function(){};e.prototype._promiseFulfilled=function(a,c){if(this._values[c]=a,++this._totalResolved>=this._length){if(this._isMap){a=this._values;c=new f;for(var b=a.length/2|0,d=0;d<b;++d)c.set(a[b+d],a[d]);a=c}else for(a={},c=this.length(),b=0,d=this.length();b<d;++b)a[this._values[b+c]]=this._values[b];return this._resolve(a),!0}return!1};e.prototype.shouldCopyValues=
function(){return!1};e.prototype.getActualLength=function(a){return a>>1};a.prototype.props=function(){return h(this)};a.props=function(a){return h(a)}}},{"./es5":13,"./util":36}],26:[function(b,e,h){function a(a){this._capacity=a;this._front=this._length=0}a.prototype._willBeOverCapacity=function(a){return this._capacity<a};a.prototype._pushOne=function(a){var c=this.length();this._checkCapacity(c+1);this[this._front+c&this._capacity-1]=a;this._length=c+1};a.prototype.push=function(a,b,d){var c=
this.length()+3;if(this._willBeOverCapacity(c))return this._pushOne(a),this._pushOne(b),void this._pushOne(d);var l=this._front+c-3;this._checkCapacity(c);var e=this._capacity-1;this[l+0&e]=a;this[l+1&e]=b;this[l+2&e]=d;this._length=c};a.prototype.shift=function(){var a=this._front,b=this[a];return this[a]=void 0,this._front=a+1&this._capacity-1,this._length--,b};a.prototype.length=function(){return this._length};a.prototype._checkCapacity=function(a){this._capacity<a&&this._resizeTo(this._capacity<<
1)};a.prototype._resizeTo=function(a){var c=this._capacity;this._capacity=a;a=this._front+this._length&c-1;for(var b=0;b<a;++b)this[b+c]=this[b+0],this[b+0]=void 0};e.exports=a},{}],27:[function(b,e,h){e.exports=function(a,c,l,d){function e(b,g){var e=l(b);if(e instanceof a)return f(e);if(null===(b=h.asArray(b)))return d("expecting an array or an iterable object but got "+h.classString(b));e=new a(c);void 0!==g&&e._propagateFrom(g,3);g=e._fulfill;for(var r=e._reject,p=0,k=b.length;p<k;++p){var m=
b[p];(void 0!==m||p in b)&&a.cast(m)._then(g,r,void 0,e,null)}return e}var h=b("./util"),f=function(a){return a.then(function(c){return e(c,a)})};a.race=function(a){return e(a,void 0)};a.prototype.race=function(){return e(this,void 0)}}},{"./util":36}],28:[function(b,e,h){e.exports=function(a,c,e,d,h,f){function l(c,b,d,g){this.constructor$(c);c=a._getContext();this._fn=m.contextBind(c,b);void 0!==d&&(d=a.resolve(d))._attachCancellationCallback(this);this._initialValue=d;this._currentCancellable=
null;this._eachValues=g===h?Array(this._length):0===g?null:void 0;this._promise._captureStackTrace();this._init$(void 0,-5)}function k(a,c){this.isFulfilled()?c._resolve(a):c._reject(a)}function g(a,c,b,d){return"function"!=typeof c?e("expecting a function but got "+m.classString(c)):(new l(a,c,b,d)).promise()}function n(c){this.accum=c;this.array._gotAccum(c);c=d(this.value,this.array._promise);return c instanceof a?(this.array._currentCancellable=c,c._then(r,void 0,void 0,this,void 0)):r.call(this,
c)}function r(c){var b,d=this.array,g=d._promise,l=u(d._fn);g._pushContext();(b=void 0!==d._eachValues?l.call(g._boundValue(),c,this.index,this.length):l.call(g._boundValue(),this.accum,c,this.index,this.length))instanceof a&&(d._currentCancellable=b);c=g._popContext();return f.checkForgottenReturns(b,c,void 0!==d._eachValues?"Promise.each":"Promise.reduce",g),b}var m=b("./util"),u=m.tryCatch;m.inherits(l,c);l.prototype._gotAccum=function(a){void 0!==this._eachValues&&null!==this._eachValues&&a!==
h&&this._eachValues.push(a)};l.prototype._eachComplete=function(a){return null!==this._eachValues&&this._eachValues.push(a),this._eachValues};l.prototype._init=function(){};l.prototype._resolveEmptyArray=function(){this._resolve(void 0!==this._eachValues?this._eachValues:this._initialValue)};l.prototype.shouldCopyValues=function(){return!1};l.prototype._resolve=function(a){this._promise._resolveCallback(a);this._values=null};l.prototype._resultCancelled=function(c){if(c===this._initialValue)return this._cancel();
this._isResolved()||(this._resultCancelled$(),this._currentCancellable instanceof a&&this._currentCancellable.cancel(),this._initialValue instanceof a&&this._initialValue.cancel())};l.prototype._iterate=function(c){var b,d;this._values=c;var g=c.length;void 0!==this._initialValue?(b=this._initialValue,d=0):(b=a.resolve(c[0]),d=1);this._currentCancellable=b;for(var l=d;l<g;++l){var e=c[l];e instanceof a&&e.suppressUnhandledRejections()}if(!b.isRejected())for(;d<g;++d)b=b._then(n,void 0,void 0,{accum:null,
value:c[d],index:d,length:g,array:this},void 0),0==(127&d)&&b._setNoAsyncGuarantee();void 0!==this._eachValues&&(b=b._then(this._eachComplete,void 0,void 0,this,void 0));b._then(k,k,void 0,b,this)};a.prototype.reduce=function(a,c){return g(this,a,c,null)};a.reduce=function(a,c,b,d){return g(a,c,b,d)}}},{"./util":36}],29:[function(b,e,h){b=b("./util");h=b.getNativePromise();if(b.isNode&&"undefined"==typeof MutationObserver){var a=v.setImmediate,c=k.nextTick;b=b.isRecentNode?function(c){a.call(v,c)}:
function(a){c.call(k,a)}}else if("function"==typeof h&&"function"==typeof h.resolve){var l=h.resolve();b=function(a){l.then(a)}}else b="undefined"!=typeof MutationObserver&&("undefined"==typeof window||!window.navigator||!window.navigator.standalone&&!window.cordova)&&"classList"in document.documentElement?function(){var a=document.createElement("div"),c={attributes:!0},b=!1,l=document.createElement("div");(new MutationObserver(function(){a.classList.toggle("foo");b=!1})).observe(l,c);return function(d){var g=
new MutationObserver(function(){g.disconnect();d()});g.observe(a,c);b||(b=!0,l.classList.toggle("foo"))}}():"undefined"!=typeof f?function(a){f(a)}:"undefined"!=typeof setTimeout?function(a){setTimeout(a,0)}:function(){throw Error("No async scheduler available\n\n    See http://goo.gl/MqrFmX\n");};e.exports=b},{"./util":36}],30:[function(b,e,h){e.exports=function(a,c,l){function d(a){this.constructor$(a)}var e=a.PromiseInspection;b("./util").inherits(d,c);d.prototype._promiseResolved=function(a,c){return this._values[a]=
c,++this._totalResolved>=this._length&&(this._resolve(this._values),!0)};d.prototype._promiseFulfilled=function(a,c){var b=new e;return b._bitField=33554432,b._settledValueField=a,this._promiseResolved(c,b)};d.prototype._promiseRejected=function(a,c){var b=new e;return b._bitField=16777216,b._settledValueField=a,this._promiseResolved(c,b)};a.settle=function(a){return l.deprecated(".settle()",".reflect()"),(new d(a)).promise()};a.allSettled=function(a){return(new d(a)).promise()};a.prototype.settle=
function(){return a.settle(this)}}},{"./util":36}],31:[function(b,e,h){e.exports=function(a,c,l){function d(a){this.constructor$(a);this._howMany=0;this._initialized=this._unwrap=!1}function e(a,c){if((0|c)!==c||0>c)return l("expecting a positive integer\n\n    See http://goo.gl/MqrFmX\n");a=new d(a);var b=a.promise();return a.setHowMany(c),a.init(),b}var h=b("./util"),f=b("./errors").RangeError,k=b("./errors").AggregateError,g=h.isArray,n={};h.inherits(d,c);d.prototype._init=function(){if(this._initialized)if(0!==
this._howMany){this._init$(void 0,-5);var a=g(this._values);!this._isResolved()&&a&&this._howMany>this._canPossiblyFulfill()&&this._reject(this._getRangeError(this.length()))}else this._resolve([])};d.prototype.init=function(){this._initialized=!0;this._init()};d.prototype.setUnwrap=function(){this._unwrap=!0};d.prototype.howMany=function(){return this._howMany};d.prototype.setHowMany=function(a){this._howMany=a};d.prototype._promiseFulfilled=function(a){return this._addFulfilled(a),this._fulfilled()===
this.howMany()&&(this._values.length=this.howMany(),1===this.howMany()&&this._unwrap?this._resolve(this._values[0]):this._resolve(this._values),!0)};d.prototype._promiseRejected=function(a){return this._addRejected(a),this._checkOutcome()};d.prototype._promiseCancelled=function(){return this._values instanceof a||null==this._values?this._cancel():(this._addRejected(n),this._checkOutcome())};d.prototype._checkOutcome=function(){if(this.howMany()>this._canPossiblyFulfill()){for(var a=new k,c=this.length();c<
this._values.length;++c)this._values[c]!==n&&a.push(this._values[c]);return 0<a.length?this._reject(a):this._cancel(),!0}return!1};d.prototype._fulfilled=function(){return this._totalResolved};d.prototype._rejected=function(){return this._values.length-this.length()};d.prototype._addRejected=function(a){this._values.push(a)};d.prototype._addFulfilled=function(a){this._values[this._totalResolved++]=a};d.prototype._canPossiblyFulfill=function(){return this.length()-this._rejected()};d.prototype._getRangeError=
function(a){return new f("Input array must contain at least "+this._howMany+" items but contains only "+a+" items")};d.prototype._resolveEmptyArray=function(){this._reject(this._getRangeError(0))};a.some=function(a,c){return e(a,c)};a.prototype.some=function(a){return e(this,a)};a._SomePromiseArray=d}},{"./errors":12,"./util":36}],32:[function(b,e,h){e.exports=function(a){function c(a){void 0!==a?(a=a._target(),this._bitField=a._bitField,this._settledValueField=a._isFateSealed()?a._settledValue():
void 0):(this._bitField=0,this._settledValueField=void 0)}c.prototype._settledValue=function(){return this._settledValueField};var b=c.prototype.value=function(){if(!this.isFulfilled())throw new TypeError("cannot get fulfillment value of a non-fulfilled promise\n\n    See http://goo.gl/MqrFmX\n");return this._settledValue()},d=c.prototype.error=c.prototype.reason=function(){if(!this.isRejected())throw new TypeError("cannot get rejection reason of a non-rejected promise\n\n    See http://goo.gl/MqrFmX\n");
return this._settledValue()},e=c.prototype.isFulfilled=function(){return 0!=(33554432&this._bitField)},h=c.prototype.isRejected=function(){return 0!=(16777216&this._bitField)},f=c.prototype.isPending=function(){return 0==(50397184&this._bitField)},k=c.prototype.isResolved=function(){return 0!=(50331648&this._bitField)};c.prototype.isCancelled=function(){return 0!=(8454144&this._bitField)};a.prototype.__isCancelled=function(){return 65536==(65536&this._bitField)};a.prototype._isCancelled=function(){return this._target().__isCancelled()};
a.prototype.isCancelled=function(){return 0!=(8454144&this._target()._bitField)};a.prototype.isPending=function(){return f.call(this._target())};a.prototype.isRejected=function(){return h.call(this._target())};a.prototype.isFulfilled=function(){return e.call(this._target())};a.prototype.isResolved=function(){return k.call(this._target())};a.prototype.value=function(){return b.call(this._target())};a.prototype.reason=function(){var a=this._target();return a._unsetRejectionIsUnhandled(),d.call(a)};
a.prototype._value=function(){return this._settledValue()};a.prototype._reason=function(){return this._unsetRejectionIsUnhandled(),this._settledValue()};a.PromiseInspection=c}},{}],33:[function(b,e,h){e.exports=function(a,c){var e=b("./util"),d=e.errorObj,h=e.isObject,f={}.hasOwnProperty;return function(b,l){if(h(b)){if(b instanceof a)return b;try{var g=b.then}catch(P){g=(d.e=P,d)}if(g===d){l&&l._pushContext();var n=a.reject(g.e);return l&&l._popContext(),n}if("function"==typeof g){try{var r=f.call(b,
"_promise0")}catch(P){r=!1}return r?(n=new a(c),b._then(n._fulfill,n._reject,void 0,n,null),n):function(b,g,l){var h=new a(c),n=h;l&&l._pushContext();h._captureStackTrace();l&&l._popContext();var f=!0;b=e.tryCatch(g).call(b,function(a){h&&(h._resolveCallback(a),h=null)},function(a){h&&(h._rejectCallback(a,f,!0),h=null)});return f=!1,h&&b===d&&(h._rejectCallback(b.e,!0,!0),h=null),n}(b,g,l)}}return b}}},{"./util":36}],34:[function(b,e,h){e.exports=function(a,c,l){function d(a){this.handle=a}function e(a){return clearTimeout(this.handle),
a}function h(a){throw clearTimeout(this.handle),a;}var f=b("./util"),k=a.TimeoutError;d.prototype._resultCancelled=function(){clearTimeout(this.handle)};var g=function(a){return n(+this).thenReturn(a)},n=a.delay=function(b,e){var h,n;return void 0!==e?(h=a.resolve(e)._then(g,null,null,b,void 0),l.cancellation()&&e instanceof a&&h._setOnCancel(e)):(h=new a(c),n=setTimeout(function(){h._fulfill()},+b),l.cancellation()&&h._setOnCancel(new d(n)),h._captureStackTrace()),h._setAsyncGuaranteed(),h};a.prototype.delay=
function(a){return n(a,this)};a.prototype.timeout=function(a,c){var b,g;a=new d(setTimeout(function(){if(b.isPending()){var a=b,d=g;var e="string"!=typeof c?c instanceof Error?c:new k("operation timed out"):new k(c);f.markAsOriginatingFromRejection(e);a._attachExtraTrace(e);a._reject(e);null!=d&&d.cancel()}},+a));return l.cancellation()?(g=this.then(),(b=g._then(e,h,void 0,a,void 0))._setOnCancel(a)):b=this._then(e,h,void 0,a,void 0),b}}},{"./util":36}],35:[function(b,e,h){e.exports=function(a,c,
e,d,h,f){function l(a){setTimeout(function(){throw a;},0)}function k(c,b){var d=0,g=c.length,n=new a(h);return function B(){if(d>=g)return n._fulfill();var h=c[d++];var f=e(h);h=(f!==h&&"function"==typeof h._isDisposable&&"function"==typeof h._getDisposer&&h._isDisposable()&&f._setDisposable(h._getDisposer()),f);if(h instanceof a&&h._isDisposable()){try{h=e(h._getDisposer().tryDispose(b),c.promise)}catch(D){return l(D)}if(h instanceof a)return h._then(B,l,null,null,null)}B()}(),n}function g(a,c,b){this._data=
a;this._promise=c;this._context=b}function n(a,c,b){this.constructor$(a,c,b)}function r(a){return g.isDisposer(a)?(this.resources[this.index]._setDisposable(a),a.promise()):a}function m(a){this.length=a;this.promise=null;this[a-1]=null}var v=b("./util"),u=b("./errors").TypeError,q=b("./util").inherits,z=v.errorObj,t=v.tryCatch,F={};g.prototype.data=function(){return this._data};g.prototype.promise=function(){return this._promise};g.prototype.resource=function(){return this.promise().isFulfilled()?
this.promise().value():F};g.prototype.tryDispose=function(a){var c=this.resource(),b=this._context;void 0!==b&&b._pushContext();a=c!==F?this.doDispose(c,a):null;return void 0!==b&&b._popContext(),this._promise._unsetDisposable(),this._data=null,a};g.isDisposer=function(a){return null!=a&&"function"==typeof a.resource&&"function"==typeof a.tryDispose};q(n,g);n.prototype.doDispose=function(a,c){return this.data().call(a,a,c)};m.prototype._resultCancelled=function(){for(var c=this.length,b=0;b<c;++b){var d=
this[b];d instanceof a&&d.cancel()}};a.using=function(){var b=arguments.length;if(2>b)return c("you must pass at least 2 arguments to Promise.using");var d,l=arguments[b-1];if("function"!=typeof l)return c("expecting a function but got "+v.classString(l));var h=!0;2===b&&Array.isArray(arguments[0])?(b=(d=arguments[0]).length,h=!1):(d=arguments,b--);for(var n=new m(b),p=0;p<b;++p){var u=d[p];if(g.isDisposer(u)){var q=u;(u=u.promise())._setDisposable(q)}else q=e(u),q instanceof a&&(u=q._then(r,null,
null,{resources:n,index:p},void 0));n[p]=u}b=Array(n.length);for(p=0;p<b.length;++p)b[p]=a.resolve(n[p]).reflect();var A=a.all(b).then(function(a){for(var c=0;c<a.length;++c){var b=a[c];if(b.isRejected())return z.e=b.error(),z;if(!b.isFulfilled())return void A.cancel();a[c]=b.value()}K._pushContext();l=t(l);a=h?l.apply(void 0,a):l(a);c=K._popContext();return f.checkForgottenReturns(a,c,"Promise.using",K),a}),K=A.lastly(function(){var c=new a.PromiseInspection(A);return k(n,c)});return n.promise=K,
K._setOnCancel(n),K};a.prototype._setDisposable=function(a){this._bitField|=131072;this._disposer=a};a.prototype._isDisposable=function(){return 0<(131072&this._bitField)};a.prototype._getDisposer=function(){return this._disposer};a.prototype._unsetDisposable=function(){this._bitField&=-131073;this._disposer=void 0};a.prototype.disposer=function(a){if("function"==typeof a)return new n(a,this,d());throw new u;}}},{"./errors":12,"./util":36}],36:[function(b,e,h){function a(){try{var a=g;return g=null,
a.apply(this,arguments)}catch(y){return q.e=y,q}}function c(a){return null==a||!0===a||!1===a||"string"==typeof a||"number"==typeof a}function l(a,b,d){return c(a)?a:(p.defineProperty(a,b,{value:d,configurable:!0,enumerable:!1,writable:!0}),a)}function d(a){return a instanceof Error||null!==a&&"object"==typeof a&&"string"==typeof a.message&&"string"==typeof a.name}function f(a){return d(a)&&p.propertyIsWritable(a,"stack")}function m(a){return{}.toString.call(a)}var p=b("./es5");h="undefined"==typeof navigator;
var q={e:{}},g,n="undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof v?v:void 0!==this?this:null,r=function(){var a=[Array.prototype,Object.prototype,Function.prototype],c=function(c){for(var b=0;b<a.length;++b)if(a[b]===c)return!0;return!1};if(p.isES5){var b=Object.getOwnPropertyNames;return function(a){for(var d=[],g=Object.create(null);null!=a&&!c(a);){try{var e=b(a)}catch(x){break}for(var l=0;l<e.length;++l){var h=e[l];if(!g[h]){g[h]=!0;var n=Object.getOwnPropertyDescriptor(a,
h);null!=n&&null==n.get&&null==n.set&&d.push(h)}}a=p.getPrototypeOf(a)}return d}}var d={}.hasOwnProperty;return function(b){if(c(b))return[];var g=[],e;a:for(e in b){if(!d.call(b,e))for(var l=0;l<a.length;++l)if(d.call(a[l],e))continue a;g.push(e)}return g}}(),t=/this\s*\.\s*\S+\s*=/,A=/^[a-z$_][a-z$_0-9]*$/i,I="stack"in Error()?function(a){return f(a)?a:Error(a+"")}:function(a){if(f(a))return a;try{throw Error(a+"");}catch(y){return y}},M=function(a){return p.isArray(a)?a:null};if("undefined"!=typeof Symbol&&
Symbol.iterator){var pa="function"==typeof Array.from?function(a){return Array.from(a)}:function(a){for(var c=[],b=a[Symbol.iterator]();!(a=b.next()).done;)c.push(a.value);return c};M=function(a){return p.isArray(a)?a:null!=a&&"function"==typeof a[Symbol.iterator]?pa(a):null}}var qa="undefined"!=typeof k&&"[object process]"===m(k).toLowerCase(),F="undefined"!=typeof k&&void 0!==k.env,E;h={setReflectHandler:function(a){E=a},isClass:function(a){try{if("function"==typeof a){var c=p.names(a.prototype),
b=p.isES5&&1<c.length,d=0<c.length&&!(1===c.length&&"constructor"===c[0]),g=t.test(a+"")&&0<p.names(a).length;if(b||d||g)return!0}return!1}catch(H){return!1}},isIdentifier:function(a){return A.test(a)},inheritedDataKeys:r,getDataPropertyOrDefault:function(a,c,b){if(!p.isES5)return{}.hasOwnProperty.call(a,c)?a[c]:void 0;a=Object.getOwnPropertyDescriptor(a,c);return null!=a?null==a.get&&null==a.set?a.value:b:void 0},thrower:function(a){throw a;},isArray:p.isArray,asArray:M,notEnumerableProp:l,isPrimitive:c,
isObject:function(a){return"function"==typeof a||"object"==typeof a&&null!==a},isError:d,canEvaluate:h,errorObj:q,tryCatch:function(c){return g=c,a},inherits:function(a,c){function b(){for(var b in this.constructor=a,this.constructor$=c,c.prototype)d.call(c.prototype,b)&&"$"!==b.charAt(b.length-1)&&(this[b+"$"]=c.prototype[b])}var d={}.hasOwnProperty;return b.prototype=c.prototype,a.prototype=new b,a.prototype},withAppended:function(a,c){var b,d=a.length,g=Array(d+1);for(b=0;b<d;++b)g[b]=a[b];return g[b]=
c,g},maybeWrapAsError:function(a){return c(a)?Error(a+""):a},toFastProperties:function(a){function c(){}c.prototype=a;new c;return a},filledRange:function(a,c,b){for(var d=Array(a),g=0;g<a;++g)d[g]=c+g+b;return d},toString:function(a){return a+""},canAttachTrace:f,ensureErrorObject:I,originatesFromRejection:function(a){return null!=a&&(a instanceof Error.__BluebirdErrorTypes__.OperationalError||!0===a.isOperational)},markAsOriginatingFromRejection:function(a){try{l(a,"isOperational",!0)}catch(y){}},
classString:m,copyDescriptors:function(a,c,b){for(var d=p.names(a),g=0;g<d.length;++g){var e=d[g];if(b(e))try{p.defineProperty(c,e,p.getDescriptor(a,e))}catch(U){}}},isNode:qa,hasEnvVariables:F,env:function(a){return F?k.env[a]:void 0},global:n,getNativePromise:function(){if("function"==typeof Promise)try{if("[object Promise]"===m(new Promise(function(){})))return Promise}catch(G){}},contextBind:function(a,c){if(null===a||"function"!=typeof c||c===E)return c;null!==a.domain&&(c=a.domain.bind(c));
var b=a.async;if(null!==b){var d=c;c=function(){var a=Array(2).concat([].slice.call(arguments));return a[0]=d,a[1]=this,b.runInAsyncScope.apply(b,a)}}return c}};var J;h.isRecentNode=h.isNode&&(k.versions&&k.versions.node?J=k.versions.node.split(".").map(Number):k.version&&(J=k.version.split(".").map(Number)),0===J[0]&&10<J[1]||0<J[0]);h.nodeSupportsAsyncResource=h.isNode&&function(){var a=!1;try{a="function"==typeof b("async_hooks").AsyncResource.prototype.runInAsyncScope}catch(y){a=!1}return a}();
h.isNode&&h.toFastProperties(k);try{throw Error();}catch(G){h.lastLineError=G}e.exports=h},{"./es5":13,async_hooks:void 0}]},{},[4])(4)});"undefined"!=typeof window&&null!==window?window.P=window.Promise:"undefined"!=typeof self&&null!==self&&(self.P=self.Promise)}).call(this,m("_process"),"undefined"!==typeof global?global:"undefined"!==typeof self?self:"undefined"!==typeof window?window:{},m("timers").setImmediate)},{_process:3,timers:10}],2:[function(m,q,t){function k(m){if(m){for(var f in k.prototype)m[f]=
k.prototype[f];return m}}"undefined"!=typeof q&&(q.exports=k);k.prototype.on=k.prototype.addEventListener=function(k,f){return this._callbacks=this._callbacks||{},(this._callbacks["$"+k]=this._callbacks["$"+k]||[]).push(f),this};k.prototype.once=function(k,f){function w(){this.off(k,w);f.apply(this,arguments)}return w.fn=f,this.on(k,w),this};k.prototype.off=k.prototype.removeListener=k.prototype.removeAllListeners=k.prototype.removeEventListener=function(k,f){if(this._callbacks=this._callbacks||{},
0==arguments.length)return this._callbacks={},this;var w,b=this._callbacks["$"+k];if(!b)return this;if(1==arguments.length)return delete this._callbacks["$"+k],this;for(var e=0;e<b.length;e++)if((w=b[e])===f||w.fn===f){b.splice(e,1);break}return 0===b.length&&delete this._callbacks["$"+k],this};k.prototype.emit=function(k){this._callbacks=this._callbacks||{};for(var f=Array(arguments.length-1),w=this._callbacks["$"+k],b=1;b<arguments.length;b++)f[b-1]=arguments[b];if(w){b=0;for(var e=(w=w.slice(0)).length;b<
e;++b)w[b].apply(this,f)}return this};k.prototype.listeners=function(k){return this._callbacks=this._callbacks||{},this._callbacks["$"+k]||[]};k.prototype.hasListeners=function(k){return!!this.listeners(k).length}},{}],3:[function(m,q,t){function k(){throw Error("setTimeout has not been defined");}function v(){throw Error("clearTimeout has not been defined");}function f(a){if(c===setTimeout)return setTimeout(a,0);if((c===k||!c)&&setTimeout)return c=setTimeout,setTimeout(a,0);try{return c(a,0)}catch(g){try{return c.call(null,
a,0)}catch(n){return c.call(this,a,0)}}}function w(a){if(l===clearTimeout)return clearTimeout(a);if((l===v||!l)&&clearTimeout)return l=clearTimeout,clearTimeout(a);try{return l(a)}catch(g){try{return l.call(null,a)}catch(n){return l.call(this,a)}}}function b(){u&&d&&(u=!1,d.length?z=d.concat(z):p=-1,z.length&&e())}function e(){if(!u){var a=f(b);u=!0;for(var c=z.length;c;){d=z;for(z=[];++p<c;)d&&d[p].run();p=-1;c=z.length}d=null;u=!1;w(a)}}function h(a,c){this.fun=a;this.array=c}function a(){}m=q.exports=
{};try{var c="function"==typeof setTimeout?setTimeout:k}catch(K){c=k}try{var l="function"==typeof clearTimeout?clearTimeout:v}catch(K){l=v}!0;var d,z=[],u=!1,p=-1;m.nextTick=function(a){var c=Array(arguments.length-1);if(1<arguments.length)for(var b=1;b<arguments.length;b++)c[b-1]=arguments[b];z.push(new h(a,c));1!==z.length||u||f(e)};h.prototype.run=function(){this.fun.apply(null,this.array)};m.title="browser";m.browser=!0;m.env={};m.argv=[];m.version="";m.versions={};m.on=a;m.addListener=a;m.once=
a;m.off=a;m.removeListener=a;m.removeAllListeners=a;m.emit=a;m.prependListener=a;m.prependOnceListener=a;m.listeners=function(a){return[]};m.binding=function(a){throw Error("process.binding is not supported");};m.cwd=function(){return"/"};m.chdir=function(a){throw Error("process.chdir is not supported");};m.umask=function(){return 0}},{}],4:[function(m,q,t){function k(){this._defaults=[]}"use on once set query type accept auth withCredentials sortQuery retry ok redirects timeout buffer serialize parse ca key pfx cert".split(" ").forEach(m=>
{k.prototype[m]=function(...f){return this._defaults.push({fn:m,args:f}),this}});k.prototype._setDefaults=function(k){this._defaults.forEach(f=>{k[f.fn].apply(k,f.args)})};q.exports=k},{}],5:[function(m,q,t){function k(){}function v(a){if(!d(a))return a;const c=[];for(const b in a)f(c,b,a[b]);return c.join("&")}function f(a,c,b){if(null!=b)if(Array.isArray(b))b.forEach(b=>{f(a,c,b)});else if(d(b))for(const d in b)f(a,`${c}[${d}]`,b[d]);else a.push(encodeURIComponent(c)+"="+encodeURIComponent(b));
else null===b&&a.push(encodeURIComponent(c))}function w(a){const c={};a=a.split("&");let b,d;for(let e=0,g=a.length;e<g;++e)-1==(d=(b=a[e]).indexOf("="))?c[decodeURIComponent(b)]="":c[decodeURIComponent(b.slice(0,d))]=decodeURIComponent(b.slice(d+1));return c}function b(a){this.req=a;this.xhr=this.req.xhr;this.text="HEAD"!=this.req.method&&(""===this.xhr.responseType||"text"===this.xhr.responseType)||void 0===this.xhr.responseType?this.xhr.responseText:null;this.statusText=this.req.xhr.statusText;
var c=this.xhr.status;1223===c&&(c=204);this._setStatusProperties(c);var b;{c=this.xhr.getAllResponseHeaders().split(/\r?\n/);const a={};let d,e,g;for(let l=0,h=c.length;l<h;++l)-1!==(b=(d=c[l]).indexOf(":"))&&(e=d.slice(0,b).toLowerCase(),g=K(d.slice(b+1)),a[e]=g);b=a}this.header=this.headers=b;this.header["content-type"]=this.xhr.getResponseHeader("content-type");this._setHeaderProperties(this.header);null===this.text&&a._responseType?this.body=this.xhr.response:this.body="HEAD"!=this.req.method?
this._parseBody(this.text?this.text:this.xhr.response):null}function e(a,c){const d=this;this._query=this._query||[];this.method=a;this.url=c;this.header={};this._header={};this.on("end",()=>{let a,c=null,e=null;try{e=new b(d)}catch(M){return(c=Error("Parser is unable to parse the response")).parse=!0,c.original=M,d.xhr?(c.rawResponse=void 0===d.xhr.responseType?d.xhr.responseText:d.xhr.response,c.status=d.xhr.status?d.xhr.status:null,c.statusCode=c.status):(c.rawResponse=null,c.status=null),d.callback(c)}d.emit("response",
e);try{d._isResponseOK(e)||(a=Error(e.statusText||"Unsuccessful HTTP response"))}catch(M){a=M}a?(a.original=c,a.response=e,a.status=e.status,d.callback(a,e)):d.callback(null,e)})}function h(a,c,b){a=p("DELETE",a);return"function"==typeof c&&(b=c,c=null),c&&a.send(c),b&&a.end(b),a}let a;"undefined"!=typeof window?a=window:"undefined"!=typeof self?a=self:(console.warn("Using browser-only version of superagent in non-browser environment"),a=this);const c=m("component-emitter"),l=m("./request-base"),
d=m("./is-object"),z=m("./response-base"),u=m("./agent-base"),p=t=q.exports=function(a,c){return"function"==typeof c?(new t.Request("GET",a)).end(c):1==arguments.length?new t.Request("GET",a):new t.Request(a,c)};t.Request=e;p.getXHR=()=>{if(!(!a.XMLHttpRequest||a.location&&"file:"==a.location.protocol&&a.ActiveXObject))return new XMLHttpRequest;try{return new ActiveXObject("Microsoft.XMLHTTP")}catch(g){}try{return new ActiveXObject("Msxml2.XMLHTTP.6.0")}catch(g){}try{return new ActiveXObject("Msxml2.XMLHTTP.3.0")}catch(g){}try{return new ActiveXObject("Msxml2.XMLHTTP")}catch(g){}throw Error("Browser-only version of superagent could not find XHR");
};const K="".trim?a=>a.trim():a=>a.replace(/(^\s*|\s*$)/g,"");p.serializeObject=v;p.parseString=w;p.types={html:"text/html",json:"application/json",xml:"text/xml",urlencoded:"application/x-www-form-urlencoded",form:"application/x-www-form-urlencoded","form-data":"application/x-www-form-urlencoded"};p.serialize={"application/x-www-form-urlencoded":v,"application/json":JSON.stringify};p.parse={"application/x-www-form-urlencoded":w,"application/json":JSON.parse};z(b.prototype);b.prototype._parseBody=
function(a){let c=p.parse[this.type];return this.req._parser?this.req._parser(this,a):(!c&&/[\/+]json($|[^-\w])/.test(this.type)&&(c=p.parse["application/json"]),c&&a&&(a.length||a instanceof Object)?c(a):null)};b.prototype.toError=function(){var a=this.req;const c=a.method;a=a.url;const b=Error(`cannot ${c} ${a} (${this.status})`);return b.status=this.status,b.method=c,b.url=a,b};p.Response=b;c(e.prototype);l(e.prototype);e.prototype.type=function(a){return this.set("Content-Type",p.types[a]||a),
this};e.prototype.accept=function(a){return this.set("Accept",p.types[a]||a),this};e.prototype.auth=function(a,c,b){1===arguments.length&&(c="");"object"==typeof c&&null!==c&&(b=c,c="");b||(b={type:"function"==typeof btoa?"basic":"auto"});return this._auth(a,c,b,a=>{if("function"==typeof btoa)return btoa(a);throw Error("Cannot use basic auth, btoa is not a function");})};e.prototype.query=function(a){return"string"!=typeof a&&(a=v(a)),a&&this._query.push(a),this};e.prototype.attach=function(a,c,b){if(c){if(this._data)throw Error("superagent can't mix .send() and .attach()");
this._getFormData().append(a,c,b||c.name)}return this};e.prototype._getFormData=function(){return this._formData||(this._formData=new a.FormData),this._formData};e.prototype.callback=function(a,c){if(this._shouldRetry(a,c))return this._retry();const b=this._callback;this.clearTimeout();a&&(this._maxRetries&&(a.retries=this._retries-1),this.emit("error",a));b(a,c)};e.prototype.crossDomainError=function(){const a=Error("Request has been terminated\nPossible causes: the network is offline, Origin is not allowed by Access-Control-Allow-Origin, the page is being unloaded, etc.");
a.crossDomain=!0;a.status=this.status;a.method=this.method;a.url=this.url;this.callback(a)};e.prototype.buffer=e.prototype.ca=e.prototype.agent=function(){return console.warn("This is not supported in browser version of superagent"),this};e.prototype.pipe=e.prototype.write=()=>{throw Error("Streaming is not supported in browser version of superagent");};e.prototype._isHost=function(a){return a&&"object"==typeof a&&!Array.isArray(a)&&"[object Object]"!==Object.prototype.toString.call(a)};e.prototype.end=
function(a){this._endCalled&&console.warn("Warning: .end() was called twice. This is not supported in superagent");this._endCalled=!0;this._callback=a||k;this._finalizeQueryString();this._end()};e.prototype._end=function(){if(this._aborted)return this.callback(Error("The request has been aborted even before .end() was called"));const a=this,c=this.xhr=p.getXHR();let b=this._formData||this._data;this._setTimeouts();c.onreadystatechange=()=>{const b=c.readyState;if(2<=b&&a._responseTimeoutTimer&&clearTimeout(a._responseTimeoutTimer),
4==b){try{var d=c.status}catch(M){d=0}if(!d)return a.timedout||a._aborted?void 0:a.crossDomainError();a.emit("end")}};var d=(c,b)=>{0<b.total&&(b.percent=b.loaded/b.total*100);b.direction=c;a.emit("progress",b)};if(this.hasListeners("progress"))try{c.onprogress=d.bind(null,"download"),c.upload&&(c.upload.onprogress=d.bind(null,"upload"))}catch(A){}try{this.username&&this.password?c.open(this.method,this.url,!0,this.username,this.password):c.open(this.method,this.url,!0)}catch(A){return this.callback(A)}if(this._withCredentials&&
(c.withCredentials=!0),!this._formData&&"GET"!=this.method&&"HEAD"!=this.method&&"string"!=typeof b&&!this._isHost(b)){d=this._header["content-type"];let a=this._serializer||p.serialize[d?d.split(";")[0]:""];!a&&/[\/+]json($|[^-\w])/.test(d)&&(a=p.serialize["application/json"]);a&&(b=a(b))}for(const a in this.header)null!=this.header[a]&&this.header.hasOwnProperty(a)&&c.setRequestHeader(a,this.header[a]);this._responseType&&(c.responseType=this._responseType);this.emit("request",this);c.send(void 0!==
b?b:null)};p.agent=()=>new u;"GET POST OPTIONS PATCH PUT DELETE".split(" ").forEach(a=>{u.prototype[a.toLowerCase()]=function(c,b){c=new p.Request(a,c);return this._setDefaults(c),b&&c.end(b),c}});u.prototype.del=u.prototype.delete;p.get=(a,c,b)=>{a=p("GET",a);return"function"==typeof c&&(b=c,c=null),c&&a.query(c),b&&a.end(b),a};p.head=(a,c,b)=>{a=p("HEAD",a);return"function"==typeof c&&(b=c,c=null),c&&a.query(c),b&&a.end(b),a};p.options=(a,c,b)=>{a=p("OPTIONS",a);return"function"==typeof c&&(b=c,
c=null),c&&a.send(c),b&&a.end(b),a};p.del=h;p.delete=h;p.patch=(a,c,b)=>{a=p("PATCH",a);return"function"==typeof c&&(b=c,c=null),c&&a.send(c),b&&a.end(b),a};p.post=(a,c,b)=>{a=p("POST",a);return"function"==typeof c&&(b=c,c=null),c&&a.send(c),b&&a.end(b),a};p.put=(a,c,b)=>{a=p("PUT",a);return"function"==typeof c&&(b=c,c=null),c&&a.send(c),b&&a.end(b),a}},{"./agent-base":4,"./is-object":6,"./request-base":7,"./response-base":8,"component-emitter":2}],6:[function(m,q,t){q.exports=function(k){return null!==
k&&"object"==typeof k}},{}],7:[function(m,q,t){function k(f){if(f){for(const b in k.prototype)f[b]=k.prototype[b];return f}}const v=m("./is-object");q.exports=k;k.prototype.clearTimeout=function(){return clearTimeout(this._timer),clearTimeout(this._responseTimeoutTimer),delete this._timer,delete this._responseTimeoutTimer,this};k.prototype.parse=function(f){return this._parser=f,this};k.prototype.responseType=function(f){return this._responseType=f,this};k.prototype.serialize=function(f){return this._serializer=
f,this};k.prototype.timeout=function(f){if(!f||"object"!=typeof f)return this._timeout=f,this._responseTimeout=0,this;for(const b in f)switch(b){case "deadline":this._timeout=f.deadline;break;case "response":this._responseTimeout=f.response;break;default:console.warn("Unknown timeout option",b)}return this};k.prototype.retry=function(f,b){return 0!==arguments.length&&!0!==f||(f=1),0>=f&&(f=0),this._maxRetries=f,this._retries=0,this._retryCallback=b,this};const f=["ECONNRESET","ETIMEDOUT","EADDRINFO",
"ESOCKETTIMEDOUT"];k.prototype._shouldRetry=function(k,b){if(!this._maxRetries||this._retries++>=this._maxRetries)return!1;if(this._retryCallback)try{const e=this._retryCallback(k,b);if(!0===e)return!0;if(!1===e)return!1}catch(e){console.error(e)}return b&&b.status&&500<=b.status&&501!=b.status||k&&(k.code&&~f.indexOf(k.code)||k.timeout&&"ECONNABORTED"==k.code||k.crossDomain)?!0:!1};k.prototype._retry=function(){return this.clearTimeout(),this.req&&(this.req=null,this.req=this.request()),this._aborted=
!1,this.timedout=!1,this._end()};k.prototype.then=function(f,b){if(!this._fullfilledPromise){const b=this;this._endCalled&&console.warn("Warning: superagent request was sent twice, because both .end() and .then() were called. Never call .end() if you use promises");this._fullfilledPromise=new Promise((e,a)=>{b.on("error",a);b.on("abort",()=>{const c=Error("Aborted");c.code="ABORTED";c.status=this.status;c.method=this.method;c.url=this.url;a(c)});b.end((c,b)=>{c?a(c):e(b)})})}return this._fullfilledPromise.then(f,
b)};k.prototype.catch=function(f){return this.then(void 0,f)};k.prototype.use=function(f){return f(this),this};k.prototype.ok=function(f){if("function"!=typeof f)throw Error("Callback required");return this._okCallback=f,this};k.prototype._isResponseOK=function(f){return!!f&&(this._okCallback?this._okCallback(f):200<=f.status&&300>f.status)};k.prototype.get=function(f){return this._header[f.toLowerCase()]};k.prototype.getHeader=k.prototype.get;k.prototype.set=function(f,b){if(v(f)){for(const b in f)this.set(b,
f[b]);return this}return this._header[f.toLowerCase()]=b,this.header[f]=b,this};k.prototype.unset=function(f){return delete this._header[f.toLowerCase()],delete this.header[f],this};k.prototype.field=function(f,b){if(null===f||void 0===f)throw Error(".field(name, val) name can not be empty");if(this._data)throw Error(".field() can't be used if .send() is used. Please use only .send() or only .field() & .attach()");if(v(f)){for(const b in f)this.field(b,f[b]);return this}if(Array.isArray(b)){for(const e in b)this.field(f,
b[e]);return this}if(null===b||void 0===b)throw Error(".field(name, val) val can not be empty");return"boolean"==typeof b&&(b=""+b),this._getFormData().append(f,b),this};k.prototype.abort=function(){return this._aborted?this:(this._aborted=!0,this.xhr&&this.xhr.abort(),this.req&&this.req.abort(),this.clearTimeout(),this.emit("abort"),this)};k.prototype._auth=function(f,b,e,h){switch(e.type){case "basic":this.set("Authorization",`Basic ${h(`${f}:${b}`)}`);break;case "auto":this.username=f;this.password=
b;break;case "bearer":this.set("Authorization",`Bearer ${f}`)}return this};k.prototype.withCredentials=function(f){return void 0==f&&(f=!0),this._withCredentials=f,this};k.prototype.redirects=function(f){return this._maxRedirects=f,this};k.prototype.maxResponseSize=function(f){if("number"!=typeof f)throw TypeError("Invalid argument");return this._maxResponseSize=f,this};k.prototype.toJSON=function(){return{method:this.method,url:this.url,data:this._data,headers:this._header}};k.prototype.send=function(f){const b=
v(f);let e=this._header["content-type"];if(this._formData)throw Error(".send() can't be used if .attach() or .field() is used. Please use only .send() or only .field() & .attach()");if(b&&!this._data)Array.isArray(f)?this._data=[]:this._isHost(f)||(this._data={});else if(f&&this._data&&this._isHost(this._data))throw Error("Can't merge these send calls");if(b&&v(this._data))for(const b in f)this._data[b]=f[b];else"string"==typeof f?(e||this.type("form"),e=this._header["content-type"],this._data="application/x-www-form-urlencoded"==
e?this._data?`${this._data}&${f}`:f:(this._data||"")+f):this._data=f;return!b||this._isHost(f)?this:(e||this.type("json"),this)};k.prototype.sortQuery=function(f){return this._sort=void 0===f||f,this};k.prototype._finalizeQueryString=function(){var f=this._query.join("&");if(f&&(this.url+=(0<=this.url.indexOf("?")?"&":"?")+f),this._query.length=0,this._sort)if(f=this.url.indexOf("?"),0<=f){const b=this.url.substring(f+1).split("&");"function"==typeof this._sort?b.sort(this._sort):b.sort();this.url=
this.url.substring(0,f)+"?"+b.join("&")}};k.prototype._appendQueryString=()=>{console.trace("Unsupported")};k.prototype._timeoutError=function(f,b,e){this._aborted||(f=Error(`${f+b}ms exceeded`),f.timeout=b,f.code="ECONNABORTED",f.errno=e,this.timedout=!0,this.abort(),this.callback(f))};k.prototype._setTimeouts=function(){const f=this;this._timeout&&!this._timer&&(this._timer=setTimeout(()=>{f._timeoutError("Timeout of ",f._timeout,"ETIME")},this._timeout));this._responseTimeout&&!this._responseTimeoutTimer&&
(this._responseTimeoutTimer=setTimeout(()=>{f._timeoutError("Response timeout of ",f._responseTimeout,"ETIMEDOUT")},this._responseTimeout))}},{"./is-object":6}],8:[function(m,q,t){function k(f){if(f){for(const m in k.prototype)f[m]=k.prototype[m];return f}}const v=m("./utils");q.exports=k;k.prototype.get=function(f){return this.header[f.toLowerCase()]};k.prototype._setHeaderProperties=function(f){var k=f["content-type"]||"";this.type=v.type(k);k=v.params(k);for(const b in k)this[b]=k[b];this.links=
{};try{f.link&&(this.links=v.parseLinks(f.link))}catch(b){}};k.prototype._setStatusProperties=function(f){const k=f/100|0;this.status=this.statusCode=f;this.statusType=k;this.info=1==k;this.ok=2==k;this.redirect=3==k;this.clientError=4==k;this.serverError=5==k;this.error=(4==k||5==k)&&this.toError();this.created=201==f;this.accepted=202==f;this.noContent=204==f;this.badRequest=400==f;this.unauthorized=401==f;this.notAcceptable=406==f;this.forbidden=403==f;this.notFound=404==f;this.unprocessableEntity=
422==f}},{"./utils":9}],9:[function(m,q,t){t.type=k=>k.split(/ *; */).shift();t.params=k=>k.split(/ *; */).reduce((k,f)=>{var m=f.split(/ *= */);f=m.shift();m=m.shift();return f&&m&&(k[f]=m),k},{});t.parseLinks=k=>k.split(/ *, */).reduce((k,f)=>{f=f.split(/ *; */);const m=f[0].slice(1,-1);return k[f[1].split(/ *= */)[1].slice(1,-1)]=m,k},{});t.cleanHeader=(k,m)=>(delete k["content-type"],delete k["content-length"],delete k["transfer-encoding"],delete k.host,m&&(delete k.authorization,delete k.cookie),
k)},{}],10:[function(m,q,t){(function(k,q){function f(a,b){this._id=a;this._clearFn=b}var w=m("process/browser.js").nextTick,b=Function.prototype.apply,e=Array.prototype.slice,h={},a=0;t.setTimeout=function(){return new f(b.call(setTimeout,window,arguments),clearTimeout)};t.setInterval=function(){return new f(b.call(setInterval,window,arguments),clearInterval)};t.clearTimeout=t.clearInterval=function(a){a.close()};f.prototype.unref=f.prototype.ref=function(){};f.prototype.close=function(){this._clearFn.call(window,
this._id)};t.enroll=function(a,b){clearTimeout(a._idleTimeoutId);a._idleTimeout=b};t.unenroll=function(a){clearTimeout(a._idleTimeoutId);a._idleTimeout=-1};t._unrefActive=t.active=function(a){clearTimeout(a._idleTimeoutId);var c=a._idleTimeout;0<=c&&(a._idleTimeoutId=setTimeout(function(){a._onTimeout&&a._onTimeout()},c))};t.setImmediate="function"==typeof k?k:function(c){var b=a++,d=!(2>arguments.length)&&e.call(arguments,1);return h[b]=!0,w(function(){h[b]&&(d?c.apply(null,d):c.call(null),t.clearImmediate(b))}),
b};t.clearImmediate="function"==typeof q?q:function(a){delete h[a]}}).call(this,m("timers").setImmediate,m("timers").clearImmediate)},{"process/browser.js":3,timers:10}],11:[function(m,q,t){function k(a){return a&&a.__esModule?a:{default:a}}function v(a){if(Array.isArray(a)){for(var c=0,b=Array(a.length);c<a.length;c++)b[c]=a[c];return b}return Array.from(a)}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(a){for(var c=1;c<arguments.length;c++){var b=arguments[c],e;for(e in b)Object.prototype.hasOwnProperty.call(b,
e)&&(a[e]=b[e])}return a},w="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?"symbol":typeof a},b=function(){function a(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(c,b,e){return b&&a(c.prototype,b),e&&a(c,e),c}}();q=m("superagent");var e=k(q);
q=m("bluebird");var h=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var a=k(m),c=new q.default;m=function(){function l(c){if(!(this instanceof l))throw new TypeError("Cannot call a class as a function");this.requestSettings=null;this.args={};this.meta=null;a.default.propNames.apiKey in c?this.args[a.default.propNames.apiKey]=c[a.default.propNames.apiKey]:console.error(a.default.missingAPIKeyMsg);a.default.propNames.host in c&&(this.args[a.default.propNames.host]=c[a.default.propNames.host]);a.default.propNames.service in
c&&(this.args[a.default.propNames.service]=c[a.default.propNames.service])}return b(l,[{key:"clear",value:function(){for(var c in this.args)c!==a.default.apiKeyPropName&&delete this.args[c]}},{key:"clearPoints",value:function(){"coordinates"in this.args&&(this.args.coordinates.length=0)}},{key:"addWaypoint",value:function(a){"coordinates"in this.args||(this.args.coordinates=[]);this.args.coordinates.push(a)}},{key:"getBody",value:function(a){a.options&&"object"!==w(a.options)&&(a.options=JSON.parse(a.options));
var c={};return"driving-hgv"==this.meta.profile&&(c.vehicle_type="hgv"),a.restrictions&&(c.profile_params={restrictions:f({},a.restrictions)},delete a.restrictions),a.avoidables&&(c.avoid_features=[].concat(v(a.avoidables)),delete a.avoidables),a.avoid_polygons&&(c.avoid_polygons=f({},a.avoid_polygons),delete a.avoid_polygons),0<Object.keys(c).length?f({},a,{options:c}):f({},a)}},{key:"calculate",value:function(b){c.setRequestDefaults(this.args,b,!0);this.args[a.default.propNames.service]||(this.args[a.default.propNames.service]=
"directions");c.copyProperties(b,this.args);var d=this;return new h.default(function(b,l){null==d.meta&&(d.meta=c.prepareMeta(d.args));d.httpArgs=c.prepareRequest(d.args);var f=c.prepareUrl(d.meta),h=d.getBody(d.httpArgs),k=d.meta[a.default.propNames.apiKey];e.default.post(f).send(h).set("Authorization",k).timeout(1E4).end(function(a,c){a||!c.ok?l(a):c&&b(c.body||c.text)})})}}]),l}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],12:[function(m,q,t){function k(b){return b&&
b.__esModule?b:{default:b}}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function b(a,c){for(var b=0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,e){return c&&b(a.prototype,c),e&&b(a,e),a}}();q=m("superagent");var f=k(q);q=m("bluebird");var w=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var b=k(m),e=new q.default;m=function(){function h(a){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
this.args={};b.default.propNames.apiKey in a?this.args[b.default.propNames.apiKey]=a[b.default.propNames.apiKey]:console.error(b.default.missingAPIKeyMsg)}return v(h,[{key:"clear",value:function(){for(var a in this.args)a!==b.default.propNames.apiKey&&delete this.args[a]}},{key:"generatePayload",value:function(a){var c={},e;for(e in a)-1<b.default.baseUrlConstituents.indexOf(e)||(c[e]=a[e]);return c}},{key:"elevationPromise",value:function(){var a=this;return new w.default(function(c,l){var d=e.prepareUrl(a.args),
h=a.generatePayload(a.args),k=a.args[b.default.propNames.apiKey];f.default.post(d).send(h).accept(a.args[b.default.propNames.mimeType]).set("Authorization",k).timeout(5E3).end(function(a,b){a||!b.ok?(console.error(a),l(Error(a))):b&&c(b.body)})})}},{key:"lineElevation",value:function(a){return e.setRequestDefaults(this.args,a),this.args[b.default.propNames.service]||a[b.default.propNames.service]||(a[[b.default.propNames.service]]="elevation/line"),e.copyProperties(a,this.args),this.elevationPromise()}},
{key:"pointElevation",value:function(a){return e.setRequestDefaults(this.args,a),this.args[b.default.propNames.service]||a[b.default.propNames.service]||(a[[b.default.propNames.service]]="elevation/point"),e.copyProperties(a,this.args),this.elevationPromise()}}]),h}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],13:[function(m,q,t){function k(b){return b&&b.__esModule?b:{default:b}}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function b(a,c){for(var b=
0;b<c.length;b++){var d=c[b];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,e){return c&&b(a.prototype,c),e&&b(a,e),a}}();q=m("superagent");var f=k(q);q=m("bluebird");var w=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var b=k(m),e=new q.default;m=function(){function h(a){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.args={};b.default.apiKeyPropName in a?this.args.api_key=
a.api_key:console.error(b.default.missingAPIKeyMsg);b.default.propNames.host in a&&(this.args[b.default.propNames.host]=a[b.default.propNames.host]);b.default.propNames.service in a&&(this.args[b.default.propNames.service]=a[b.default.propNames.service]);this.lookupParameter={api_key:function(a,b){return a+"="+b},text:function(a,b){return"&"+a+"="+b},focus_point:function(a,b){a="";return a+="&focus.point.lon="+b[1],a+("&focus.point.lat="+b[0])},boundary_bbox:function(a,b){a="";return a+="&boundary.rect.min_lon="+
b[0][1],a+="&boundary.rect.min_lat="+b[0][0],a+="&boundary.rect.max_lon="+b[1][1],a+("&boundary.rect.max_lat="+b[1][0])},point:function(a,b){a="";return a+="&point.lon="+b.lat_lng[1],a+="&point.lat="+b.lat_lng[0],a+("&boundary.circle.radius="+b.radius)},boundary_circle:function(a,b){a="";return a+="&boundary.circle.lon="+b.lat_lng[1],a+="&boundary.circle.lat="+b.lat_lng[0],a+("&boundary.circle.radius="+b.radius)},sources:function(a,b){a="&sources=";for(var c in b)a+=c+",";return a},layers:function(a,
b){var c="&layers=",e=0;for(a in b)0<e&&(c+=","),c+=b[a],e++;return c},boundary_country:function(a,b){return"&boundary.country="+b},size:function(a,b){return"&"+a+"="+b},address:function(a,b){return"&"+a+"="+b},neighbourhood:function(a,b){return"&"+a+"="+b},borough:function(a,b){return"&"+a+"="+b},locality:function(a,b){return"&"+a+"="+b},county:function(a,b){return"&"+a+"="+b},region:function(a,b){return"&"+a+"="+b},postalcode:function(a,b){return"&"+a+"="+b},country:function(a,b){return"&"+a+"="+
b}}}return v(h,[{key:"clear",value:function(){for(var a in this.args)a!==b.default.apiKeyPropName&&delete this.args[a]}},{key:"getParametersAsQueryString",value:function(a){var c="",e;for(e in a){var d=a[e];-1<b.default.baseUrlConstituents.indexOf(e)||(c+=this.lookupParameter[e](e,d))}return c}},{key:"geocodePromise",value:function(){var a=this;return new w.default(function(c,h){var d=e.prepareUrl(a.args);d+="?"+a.getParametersAsQueryString(a.args);f.default.get(d).accept(a.args[b.default.propNames.mimeType]).timeout(5E3).end(function(a,
b){a||!b.ok?(console.error(a),h(Error(a))):b&&c(b.body)})})}},{key:"geocode",value:function(a){return e.setRequestDefaults(this.args,a),this.args[b.default.propNames.service]||a[b.default.propNames.service]||(a.service="geocode/search"),e.copyProperties(a,this.args),this.geocodePromise()}},{key:"reverseGeocode",value:function(a){return e.setRequestDefaults(this.args,a),this.args[b.default.propNames.service]||a[b.default.propNames.service]||(a.service="geocode/reverse"),e.copyProperties(a,this.args),
this.geocodePromise()}},{key:"structuredGeocode",value:function(a){return e.setRequestDefaults(this.args,a),this.args[b.default.propNames.service]||a[b.default.propNames.service]||(a.service="geocode/search/structured"),e.copyProperties(a,this.args),this.geocodePromise()}}]),h}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],14:[function(m,q,t){Object.defineProperty(t,"__esModule",{value:!0});var k=function(){function k(f,k){for(var b=0;b<k.length;b++){var e=k[b];e.enumerable=
e.enumerable||!1;e.configurable=!0;"value"in e&&(e.writable=!0);Object.defineProperty(f,e.key,e)}}return function(f,m,b){return m&&k(f.prototype,m),b&&k(f,b),f}}();m=function(){function m(f,k){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");this.setCoord(f,k)}return k(m,[{key:"round",value:function(f,k){return void 0===k&&(k=1E6),Math.round(f*k)/k}},{key:"setCoord",value:function(f,k){this.coord=[this.round(f),this.round(k)]}},{key:"isObject",value:function(f){return"[object object]"===
Object.prototype.toString.call(f).toLowerCase()}},{key:"isString",value:function(f){return"[object string]"===Object.prototype.toString.call(f).toLowerCase()}},{key:"set",value:function(f,k){k?this.setCoord(f,k):m.isObject(f)?this.setCoord(f.lat,f.lng):m.isString(f)&&(k=f.indexOf(","),0<=k&&(this.coord=[this.round(parseFloat(f.substr(0,k))),this.round(parseFloat(f.substr(k+1)))]))}},{key:"toString",value:function(){if(void 0!==this.lat&&void 0!==this.lng)return this.lat+","+this.lng}}]),m}();t.default=
m},{}],15:[function(m,q,t){function k(a){return a&&a.__esModule?a:{default:a}}function v(a){if(Array.isArray(a)){for(var b=0,c=Array(a.length);b<a.length;b++)c[b]=a[b];return c}return Array.from(a)}Object.defineProperty(t,"__esModule",{value:!0});var f=Object.assign||function(a){for(var b=1;b<arguments.length;b++){var c=arguments[b],e;for(e in c)Object.prototype.hasOwnProperty.call(c,e)&&(a[e]=c[e])}return a},w=function(){function a(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||
!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(b,c,e){return c&&a(b.prototype,c),e&&a(b,e),b}}();q=m("superagent");var b=k(q);q=m("bluebird");var e=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var h=k(m),a=new q.default;m=function(){function c(a){if(!(this instanceof c))throw new TypeError("Cannot call a class as a function");this.meta=null;this.args={};h.default.propNames.apiKey in a?this.args[h.default.propNames.apiKey]=a[h.default.propNames.apiKey]:
console.log(h.default.missingAPIKeyMsg);h.default.propNames.host in a&&(this.args[h.default.propNames.host]=a[h.default.propNames.host]);h.default.propNames.service in a&&(this.args[h.default.propNames.service]=a[h.default.propNames.service])}return w(c,[{key:"addLocation",value:function(a){"locations"in this.args||(this.args.locations=[]);this.args.locations.push(a)}},{key:"getBody",value:function(a){var b={};return a.restrictions&&(b.profile_params={restrictions:f({},a.restrictions)},delete a.restrictions),
a.avoidables&&(b.avoid_features=[].concat(v(a.avoidables)),delete a.avoidables),a.avoid_polygons&&(b.avoid_polygons=f({},a.avoid_polygons),delete a.avoid_polygons),0<Object.keys(b).length?f({},a,{options:b}):f({},a)}},{key:"calculate",value:function(c){a.setRequestDefaults(this.args,c,!0);this.args[h.default.propNames.service]||c[h.default.propNames.service]||(c.service="isochrones");a.copyProperties(c,this.args);var d=this;return new e.default(function(c,e){if(d.args[h.default.propNames.apiVersion]===
h.default.defaultAPIVersion){null==d.meta&&(d.meta=a.prepareMeta(d.args));d.httpArgs=a.prepareRequest(d.args);var f=a.prepareUrl(d.meta),l=d.getBody(d.httpArgs),g=d.meta[h.default.propNames.apiKey];b.default.post(f).send(l).set("Authorization",g).timeout(1E4).end(function(a,b){a||!b.ok?(console.error(a),e(a)):b&&c(b.body)})}else console.error(h.default.useAPIV2Msg)})}}]),c}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],16:[function(m,q,t){function k(b){return b&&b.__esModule?
b:{default:b}}Object.defineProperty(t,"__esModule",{value:!0});var v=function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,e){return c&&b(a.prototype,c),e&&b(a,e),a}}();q=m("superagent");var f=k(q);q=m("bluebird");var w=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var b=k(m),e=new q.default;m=function(){function h(a){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");
this.meta=null;this.args={};b.default.propNames.apiKey in a?this.args[b.default.propNames.apiKey]=a[b.default.propNames.apiKey]:console.log(b.default.missingAPIKeyMsg)}return v(h,[{key:"calculate",value:function(a){e.setRequestDefaults(this.args,a,!0);this.args[b.default.propNames.service]||a[b.default.propNames.service]||(this.args[b.default.propNames.service]="matrix");e.copyProperties(a,this.args);var c=this;return new w.default(function(a,d){if(c.args[b.default.propNames.apiVersion]===b.default.defaultAPIVersion){null==
c.meta&&(c.meta=e.prepareMeta(c.args));c.httpArgs=e.prepareRequest(c.args);var h=e.prepareUrl(c.meta),k=c.meta[b.default.propNames.apiKey];f.default.post(h).send(c.httpArgs).set("Authorization",k).timeout(1E4).end(function(b,c){b||!c.ok?d(b):c&&a(c.body)})}else console.error(b.default.useAPIV2Msg)})}}]),h}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],17:[function(m,q,t){function k(b){return b&&b.__esModule?b:{default:b}}Object.defineProperty(t,"__esModule",{value:!0});
var v=function(){function b(a,b){for(var c=0;c<b.length;c++){var d=b[c];d.enumerable=d.enumerable||!1;d.configurable=!0;"value"in d&&(d.writable=!0);Object.defineProperty(a,d.key,d)}}return function(a,c,e){return c&&b(a.prototype,c),e&&b(a,e),a}}();q=m("superagent");var f=k(q);q=m("bluebird");var w=k(q);q=m("./OrsUtil");q=k(q);m=m("./constants");var b=k(m),e=new q.default;m=function(){function h(a){if(!(this instanceof h))throw new TypeError("Cannot call a class as a function");this.args={};b.default.propNames.apiKey in
a?this.args[b.default.propNames.apiKey]=a[b.default.propNames.apiKey]:console.error(b.default.missingAPIKeyMsg);b.default.propNames.host in a&&(this.args[b.default.propNames.host]=a[b.default.propNames.host]);b.default.propNames.service in a&&(this.args[b.default.propNames.service]=a[b.default.propNames.service])}return v(h,[{key:"clear",value:function(){for(var a in this.args)a!==b.default.propNames.apiKey&&delete this.args[a]}},{key:"generatePayload",value:function(a){var c={},e;for(e in a)-1<b.default.baseUrlConstituents.indexOf(e)||
(c[e]=a[e]);return c}},{key:"poisPromise",value:function(){this.args[b.default.propNames.service]||(this.args[b.default.propNames.service]="pois");this.args.request=this.args.request||"pois";var a=this;return new w.default(function(c,h){var d=e.prepareUrl(a.args);d+=-1<d.indexOf("?")?"&":"?";d+=b.default.propNames.apiKey+"="+a.args[b.default.propNames.apiKey];a.args[b.default.propNames.service]&&delete a.args[b.default.propNames.service];var k=a.generatePayload(a.args),l=a.args[b.default.propNames.apiKey];
f.default.post(d).send(k).set("Authorization",l).timeout(5E3).end(function(a,b){a||!b.ok?(console.error(a),h(a)):b&&c(b.body)})})}},{key:"pois",value:function(a){return e.setRequestDefaults(this.args,a),e.copyProperties(a,this.args),this.poisPromise()}}]),h}();t.default=m},{"./OrsUtil":18,"./constants":19,bluebird:1,superagent:5}],18:[function(m,q,t){Object.defineProperty(t,"__esModule",{value:!0});var k=Object.assign||function(f){for(var b=1;b<arguments.length;b++){var e=arguments[b],h;for(h in e)Object.prototype.hasOwnProperty.call(e,
h)&&(f[h]=e[h])}return f},v=function(){function f(b,e){for(var f=0;f<e.length;f++){var a=e[f];a.enumerable=a.enumerable||!1;a.configurable=!0;"value"in a&&(a.writable=!0);Object.defineProperty(b,a.key,a)}}return function(b,e,h){return e&&f(b.prototype,e),h&&f(b,h),b}}(),f=(m=m("./constants"))&&m.__esModule?m:{default:m};m=function(){function m(){if(!(this instanceof m))throw new TypeError("Cannot call a class as a function");}return v(m,[{key:"clone",value:function(b){var e={},f;for(f in b)b.hasOwnProperty(f)&&
(e[f]=b[f]);return e}},{key:"copyProperties",value:function(b,e){if(!b)return e;for(var f in b)b.hasOwnProperty(f)&&void 0!==b[f]&&(e[f]=b[f]);return e}},{key:"extractError",value:function(b,e){var f=void 0;return b&&b.body?(f=b.body).message&&(f=f.message):f=b,Error(f+" - for url "+e)}},{key:"isArray",value:function(b){return"[object array]"===Object.prototype.toString.call(b).toLowerCase()}},{key:"isObject",value:function(b){return"[object object]"===Object.prototype.toString.call(b).toLowerCase()}},
{key:"isString",value:function(b){return"string"==typeof b}},{key:"prepareMeta",value:function(b){return{host:b[f.default.propNames.host],api_version:b[f.default.propNames.apiVersion],profile:b[f.default.propNames.profile],format:b[f.default.propNames.format],service:b[f.default.propNames.service],api_key:b[f.default.propNames.apiKey],mime_type:b[f.default.propNames.mimeType]}}},{key:"prepareRequest",value:function(b){return delete b[f.default.propNames.mimeType],delete b[f.default.propNames.host],
delete b[f.default.propNames.apiVersion],delete b[f.default.propNames.service],delete b[f.default.propNames.apiKey],delete b[f.default.propNames.profile],delete b[f.default.propNames.format],k({},b)}},{key:"prepareUrl",value:function(b){var e="",h=[];b[f.default.propNames.service]&&0===b[f.default.propNames.service].indexOf("http")?(e=b[f.default.propNames.service],h=[b[f.default.propNames.profile],b[f.default.propNames.format]]):(e=b[f.default.propNames.host],h=[b[f.default.propNames.apiVersion],
b[f.default.propNames.service],b[f.default.propNames.profile],b[f.default.propNames.format]]);b="/";var a=0,c;for(c in h)h[c]&&(0<a&&a&&(b+="/"),b+=h[c]),a++;return"/"===(e+=b.replace(/\/\//g,"/")).slice(-1)&&(e=e.slice(0,-1)),e}},{key:"setRequestDefaults",value:function(b,e){var h=2<arguments.length&&void 0!==arguments[2]&&arguments[2];e[f.default.propNames.service]&&(b[f.default.propNames.service]=e[f.default.propNames.service]);e[f.default.propNames.host]&&(b[f.default.propNames.host]=e[f.default.propNames.host]);
b[f.default.propNames.host]||(b[f.default.propNames.host]=f.default.defaultHost);!0===h&&(e[f.default.propNames.apiVersion]||(e.api_version=f.default.defaultAPIVersion),e[f.default.propNames.apiVersion]||(e.api_version=f.default.defaultAPIVersion))}}]),m}();t.default=m},{"./constants":19}],19:[function(m,q,t){Object.defineProperty(t,"__esModule",{value:!0});t.default={defaultAPIVersion:"v2",defaultHost:"https://api.openrouteservice.org",apiKeyPropName:"api_key",hostPropName:"host",missingAPIKeyMsg:"Please add your openrouteservice api_key..",
useAPIV2Msg:"Please use ORS API v2",baseUrlConstituents:["host","service","api_version","mime_type"],propNames:{apiKey:"api_key",host:"host",service:"service",apiVersion:"api_version",mimeType:"mime_type",profile:"profile",format:"format"}}},{}],20:[function(m,q,t){function k(a){return a&&a.__esModule?a:{default:a}}t="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(a){return typeof a}:function(a){return a&&"function"==typeof Symbol&&a.constructor===Symbol&&a!==Symbol.prototype?
"symbol":typeof a};var v=m("./OrsUtil.js");v=k(v);var f=m("./OrsInput.js");f=k(f);var w=m("./OrsGeocode.js");w=k(w);var b=m("./OrsIsochrones.js");b=k(b);var e=m("./OrsMatrix.js");e=k(e);var h=m("./OrsDirections.js");h=k(h);var a=m("./OrsPois.js");a=k(a);m=m("./OrsElevation.js");m=k(m);m={Util:v.default,Input:f.default,Geocode:w.default,Isochrones:b.default,Directions:h.default,Matrix:e.default,Pois:a.default,Elevation:m.default};"object"===("undefined"==typeof q?"undefined":t(q))&&"object"===t(q.exports)?
q.exports=m:"function"==typeof define&&define.amd&&define(m);"undefined"!=typeof window&&(window.Openrouteservice=m)},{"./OrsDirections.js":11,"./OrsElevation.js":12,"./OrsGeocode.js":13,"./OrsInput.js":14,"./OrsIsochrones.js":15,"./OrsMatrix.js":16,"./OrsPois.js":17,"./OrsUtil.js":18}]},{},[20]);