var editLayerPoly=[];myMap.on(L.Draw.Event.EDITVERTEX,function(a){var c=a.poly,b=c.getLatLngs(),d;for(let a=0;a<editLayerPoly.length;a++)editLayerPoly[a][0]===c&&(d=editLayerPoly[a][1]);void 0!==d?jscallback.updateRoute(L.Draw.Event.EDITVERTEX,d,coordsToString(b)):jscallback.log("e.poly: "+a.poly+" has no attached layer!")});var tooltip=document.createElement("div");tooltip.style.cssText="display: none; position: absolute; background: #666; color: white; padding: 10px; border: 1px dashed #999; font-family: sans-serif; font-size: 12px; height: 20px; line-height: 20px; z-index: 1000;";
document.body.appendChild(tooltip);function addTooltip(a){L.DomEvent.on(document,"mousemove",moveTooltip);tooltip.innerHTML="Click on the map to start a new route.";tooltip.style.display="block"}function removeTooltip(a){tooltip.innerHTML="";tooltip.style.display="none";L.DomEvent.off(document,"mousemove",moveTooltip)}function moveTooltip(a){tooltip.style.left=a.clientX+20+"px";tooltip.style.top=a.clientY-10+"px"}
function updateTooltip(a){tooltip.innerHTML=a.layer.editor._drawnLatLngs.length<a.layer.editor.MIN_VERTEX?"Click on the map to continue the route.":"Click on last point to finish the route."}myMap.on(L.Draw.Event.DRAWSTART,addTooltip);myMap.on(L.Draw.Event.DRAWSTOP,removeTooltip);myMap.on(L.Draw.Event.DRAWVERTEX,updateTooltip);
function makeEditable(a){var c=window[a];c.editing.enable();editLayerPoly.push([c,a]);c.on("mouseover",function(b){b=b.latlng;jscallback.registerRoute(a,b.lat,b.lng);c.openTooltip(b)});c.on("mouseout",function(b){b=b.latlng;jscallback.deregisterRoute(a,b.lat,b.lng);c.closeTooltip()})}function clearEditable(){editLayerPoly=[]};